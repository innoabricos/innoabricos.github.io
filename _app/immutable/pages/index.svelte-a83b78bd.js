import{S as xe,i as ye,s as Ee,e as k,k as Y,c as x,a as E,d as p,m as B,M as ze,b as a,g as X,L as m,E as Q,N as We,O as ke,l as de,q as C,n as he,o as N,p as pe,v as Ze,P as Re,w as te,x as re,y as le,B as se,t as ce,h as fe,Q as Se,R as G,T as Te,j as Ce,U as Ge,V as Je,W as Vt,f as ve,X as Ue,Y as zt,Z as $e,_ as Pe,$ as Ye,a0 as ot,a1 as Ct,F as Tt,G as At,a2 as Ft}from"../chunks/index-b7066284.js";import{u as jt,g as Xe,E as at,D as Mt,B as it,V as Nt}from"../chunks/firebase-d9cec40e.js";import{o as Ke,f as He,M as St,S as Pt,C as Yt,g as qe,T as Et,u as Bt,s as Lt,d as Rt,a as Ut,c as Ht,b as Qe,i as Le,e as It,h as ct,j as qt,k as ft,l as Gt,m as Ot,N as Xt,n as Be,p as Ve}from"../chunks/Navbar-f096cd27.js";import{P as $t}from"../chunks/ProgressIndicator-619c61c5.js";import"../chunks/index-68a179b3.js";function dt(s){let e,r,t,l,n,f,o,g,u,i,d,c,h,v,I,D,L;return{c(){e=k("div"),r=k("div"),t=k("div"),l=k("img"),f=Y(),o=k("div"),g=k("div"),u=k("img"),d=Y(),c=k("div"),h=k("div"),v=k("img"),this.h()},l(A){e=x(A,"DIV",{class:!0,id:!0});var w=E(e);r=x(w,"DIV",{class:!0});var b=E(r);t=x(b,"DIV",{class:!0});var M=E(t);l=x(M,"IMG",{src:!0,alt:!0}),M.forEach(p),b.forEach(p),f=B(w),o=x(w,"DIV",{class:!0});var y=E(o);g=x(y,"DIV",{class:!0});var j=E(g);u=x(j,"IMG",{src:!0,alt:!0}),j.forEach(p),y.forEach(p),d=B(w),c=x(w,"DIV",{class:!0});var T=E(c);h=x(T,"DIV",{class:!0});var H=E(h);v=x(H,"IMG",{src:!0,alt:!0}),H.forEach(p),T.forEach(p),w.forEach(p),this.h()},h(){ze(l.src,n="/images/arrow.png")||a(l,"src",n),a(l,"alt","arrow"),a(t,"class","arrow svelte-arkf3m"),a(r,"class","arrowSliding svelte-arkf3m"),ze(u.src,i="/images/arrow.png")||a(u,"src",i),a(u,"alt","arrow"),a(g,"class","arrow svelte-arkf3m"),a(o,"class","arrowSliding delay1 svelte-arkf3m"),ze(v.src,I="/images/arrow.png")||a(v,"src",I),a(v,"alt","arrow"),a(h,"class","arrow svelte-arkf3m"),a(c,"class","arrowSliding delay2 svelte-arkf3m"),a(e,"class","mr-3 svelte-arkf3m"),a(e,"id","arrowAnim")},m(A,w){X(A,e,w),m(e,r),m(r,t),m(t,l),m(e,f),m(e,o),m(o,g),m(g,u),m(e,d),m(e,c),m(c,h),m(h,v),s[2](e),L=!0},p:Q,i(A){L||(We(()=>{D||(D=ke(e,He,{},!0)),D.run(1)}),L=!0)},o(A){D||(D=ke(e,He,{},!1)),D.run(0),L=!1},d(A){A&&p(e),s[2](null),A&&D&&D.end()}}}function Qt(s){let e,r,t=s[1]&&dt(s);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,n){t&&t.m(l,n),X(l,e,n),r=!0},p(l,[n]){l[1]?t?(t.p(l,n),n&2&&C(t,1)):(t=dt(l),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(he(),N(t,1,1,()=>{t=null}),pe())},i(l){r||(C(t),r=!0)},o(l){N(t),r=!1},d(l){t&&t.d(l),l&&p(e)}}}function Wt(s,e,r){let t,l=!0;Ze(()=>{Ke.subscribe(f=>{f==="folder"?r(1,l=!1):setTimeout(()=>{r(1,l=!0)},200)})});function n(f){Re[f?"unshift":"push"](()=>{t=f,r(0,t)})}return[t,l,n]}class Zt extends xe{constructor(e){super(),ye(this,e,Wt,Qt,Ee,{})}}function ut(s,e,r){const t=s.slice();return t[19]=e[r],t}function mt(s){let e,r,t;return r=new Et({props:{tag:s[19]}}),{c(){e=k("div"),te(r.$$.fragment),this.h()},l(l){e=x(l,"DIV",{class:!0});var n=E(e);re(r.$$.fragment,n),n.forEach(p),this.h()},h(){a(e,"class","tag-tag svelte-1fix5m")},m(l,n){X(l,e,n),le(r,e,null),t=!0},p(l,n){const f={};n&8&&(f.tag=l[19]),r.$set(f)},i(l){t||(C(r.$$.fragment,l),t=!0)},o(l){N(r.$$.fragment,l),t=!1},d(l){l&&p(e),se(r)}}}function Jt(s){let e,r,t,l,n,f,o,g,u,i,d,c,h,v,I,D,L,A,w,b,M,y,j,T,H,ee,Z,O,ae,q,oe,be,W,P,ue,S,_,z,F,J,me,_e,Ie;O=new St({props:{chosenTags:s[3],tags:s[5],isVisible:s[6]}}),O.$on("handleChosenTag",s[8]);let ne=s[3],R=[];for(let V=0;V<ne.length;V+=1)R[V]=mt(ut(s,ne,V));const Ae=V=>N(R[V],1,1,()=>{R[V]=null});return _=new Pt({}),_.$on("click",s[9]),F=new Yt({}),F.$on("click",s[16]),{c(){e=k("div"),r=k("div"),t=k("header"),l=k("span"),n=ce(s[4]),f=Y(),o=k("main"),g=k("label"),u=k("span"),i=ce("Done:"),d=Y(),c=k("input"),h=Y(),v=k("label"),I=k("span"),D=ce("Notification:"),L=Y(),A=k("input"),w=Y(),b=k("label"),M=k("span"),y=ce("Tags:"),j=Y(),T=k("img"),ee=Y(),Z=k("div"),te(O.$$.fragment),ae=Y(),q=k("div"),oe=k("div");for(let V=0;V<R.length;V+=1)R[V].c();be=Y(),W=k("textarea"),P=Y(),ue=k("footer"),S=k("div"),te(_.$$.fragment),z=Y(),te(F.$$.fragment),this.h()},l(V){e=x(V,"DIV",{class:!0});var U=E(e);r=x(U,"DIV",{class:!0});var K=E(r);t=x(K,"HEADER",{class:!0});var $=E(t);l=x($,"SPAN",{});var De=E(l);n=fe(De,s[4]),De.forEach(p),$.forEach(p),f=B(K),o=x(K,"MAIN",{class:!0});var ge=E(o);g=x(ge,"LABEL",{for:!0,class:!0});var Fe=E(g);u=x(Fe,"SPAN",{class:!0});var et=E(u);i=fe(et,"Done:"),et.forEach(p),d=B(Fe),c=x(Fe,"INPUT",{id:!0,type:!0,class:!0}),Fe.forEach(p),h=B(ge),v=x(ge,"LABEL",{for:!0,class:!0});var je=E(v);I=x(je,"SPAN",{class:!0});var tt=E(I);D=fe(tt,"Notification:"),tt.forEach(p),L=B(je),A=x(je,"INPUT",{id:!0,type:!0,class:!0}),je.forEach(p),w=B(ge),b=x(ge,"LABEL",{for:!0,class:!0});var we=E(b);M=x(we,"SPAN",{class:!0});var rt=E(M);y=fe(rt,"Tags:"),rt.forEach(p),j=B(we),T=x(we,"IMG",{alt:!0,src:!0,class:!0}),ee=B(we),Z=x(we,"DIV",{class:!0});var lt=E(Z);re(O.$$.fragment,lt),lt.forEach(p),we.forEach(p),ae=B(ge),q=x(ge,"DIV",{class:!0});var Me=E(q);oe=x(Me,"DIV",{class:!0});var st=E(oe);for(let Oe=0;Oe<R.length;Oe+=1)R[Oe].l(st);st.forEach(p),be=B(Me),W=x(Me,"TEXTAREA",{placeholder:!0,class:!0}),E(W).forEach(p),Me.forEach(p),ge.forEach(p),P=B(K),ue=x(K,"FOOTER",{class:!0});var nt=E(ue);S=x(nt,"DIV",{class:!0});var Ne=E(S);re(_.$$.fragment,Ne),z=B(Ne),re(F.$$.fragment,Ne),Ne.forEach(p),nt.forEach(p),K.forEach(p),U.forEach(p),this.h()},h(){a(t,"class","svelte-1fix5m"),a(u,"class","svelte-1fix5m"),a(c,"id","done"),a(c,"type","checkbox"),a(c,"class","svelte-1fix5m"),a(g,"for","done"),a(g,"class","svelte-1fix5m"),a(I,"class","svelte-1fix5m"),a(A,"id","notify"),a(A,"type","datetime-local"),a(A,"class","svelte-1fix5m"),a(v,"for","notify"),a(v,"class","svelte-1fix5m"),a(M,"class","svelte-1fix5m"),a(T,"alt","plus"),ze(T.src,H="images/plus.svg")||a(T,"src",H),a(T,"class","svelte-1fix5m"),a(Z,"class","multiselect svelte-1fix5m"),a(b,"for","tags"),a(b,"class","svelte-1fix5m"),a(oe,"class","tags svelte-1fix5m"),a(W,"placeholder","Enter description"),a(W,"class","svelte-1fix5m"),a(q,"class","changeable svelte-1fix5m"),a(o,"class","svelte-1fix5m"),a(S,"class","buttons svelte-1fix5m"),a(ue,"class","svelte-1fix5m"),a(r,"class","center-block svelte-1fix5m"),a(e,"class","background svelte-1fix5m")},m(V,U){X(V,e,U),m(e,r),m(r,t),m(t,l),m(l,n),m(r,f),m(r,o),m(o,g),m(g,u),m(u,i),m(g,d),m(g,c),c.checked=s[0],m(o,h),m(o,v),m(v,I),m(I,D),m(v,L),m(v,A),Se(A,s[1]),m(o,w),m(o,b),m(b,M),m(M,y),m(b,j),m(b,T),m(b,ee),m(b,Z),le(O,Z,null),m(o,ae),m(o,q),m(q,oe);for(let K=0;K<R.length;K+=1)R[K].m(oe,null);m(q,be),m(q,W),Se(W,s[2]),m(r,P),m(r,ue),m(ue,S),le(_,S,null),m(S,z),le(F,S,null),me=!0,_e||(Ie=[G(c,"change",s[12]),G(A,"input",s[13]),G(T,"click",Te(s[14])),G(W,"input",s[15]),G(r,"click",Te(s[17]))],_e=!0)},p(V,[U]){(!me||U&16)&&Ce(n,V[4]),U&1&&(c.checked=V[0]),U&2&&Se(A,V[1]);const K={};if(U&8&&(K.chosenTags=V[3]),U&32&&(K.tags=V[5]),U&64&&(K.isVisible=V[6]),O.$set(K),U&8){ne=V[3];let $;for($=0;$<ne.length;$+=1){const De=ut(V,ne,$);R[$]?(R[$].p(De,U),C(R[$],1)):(R[$]=mt(De),R[$].c(),C(R[$],1),R[$].m(oe,null))}for(he(),$=ne.length;$<R.length;$+=1)Ae($);pe()}U&4&&Se(W,V[2])},i(V){if(!me){C(O.$$.fragment,V);for(let U=0;U<ne.length;U+=1)C(R[U]);C(_.$$.fragment,V),C(F.$$.fragment,V),We(()=>{J||(J=ke(r,He,{},!0)),J.run(1)}),me=!0}},o(V){N(O.$$.fragment,V),R=R.filter(Boolean);for(let U=0;U<R.length;U+=1)N(R[U]);N(_.$$.fragment,V),N(F.$$.fragment,V),J||(J=ke(r,He,{},!1)),J.run(0),me=!1},d(V){V&&p(e),se(O),Ge(R,V),se(_),se(F),V&&J&&J.end(),_e=!1,Je(Ie)}}}function Kt(s,e,r){const t=Vt();let{done:l=!1}=e,{datetime:n}=e,{ts:f}=e,{description:o}=e,{chosenTags:g=[]}=e,{title:u}=e,{docId:i}=e,d=[];function c(y){const j=new Date(y.seconds*1e3),T=`${j.getFullYear()}`;let H=`${j.getMonth()+1}`;H.length===1&&(H=`0${H}`);let ee=`${j.getDate()}`;ee.length===1&&(ee=`0${ee}`);let Z=`${j.getHours()}`;Z.length===1&&(Z=`0${Z}`);let O=`${j.getMinutes()}`;O.length===1&&(O=`0${O}`),r(1,n=`${T}-${H}-${ee}T${Z}:${O}`)}f&&c(f),qe().then(y=>{r(5,d=y.tags)});let h=!1;function v(y){y.detail.checked?r(3,g=[...g,y.detail.tag]):r(3,g=g.filter(j=>j.text!==y.detail.tag.text))}async function I(){let y;if(!o)return;const j={checked:l,text:o,tags:g};if(n){const H=new Date(n);y=jt.fromDate(new Date(H.getFullYear(),H.getMonth(),H.getDate(),H.getHours(),H.getMinutes()))}y&&(j.date=y),i&&(j.docId=i);const T=await Bt(j);t("close"),j.docId&&n&&await Lt(n,T,o),t("close")}function D(){l=this.checked,r(0,l)}function L(){n=this.value,r(1,n)}const A=()=>{r(6,h=!h)};function w(){o=this.value,r(2,o)}const b=()=>t("close"),M=()=>{r(6,h=!1)};return s.$$set=y=>{"done"in y&&r(0,l=y.done),"datetime"in y&&r(1,n=y.datetime),"ts"in y&&r(10,f=y.ts),"description"in y&&r(2,o=y.description),"chosenTags"in y&&r(3,g=y.chosenTags),"title"in y&&r(4,u=y.title),"docId"in y&&r(11,i=y.docId)},[l,n,o,g,u,d,h,t,v,I,f,i,D,L,A,w,b,M]}class Dt extends xe{constructor(e){super(),ye(this,e,Kt,Jt,Ee,{done:0,datetime:1,ts:10,description:2,chosenTags:3,title:4,docId:11})}}const{window:gt}=zt;function ht(s,e,r){const t=s.slice();return t[20]=e[r],t}function pt(s){let e,r,t,l;return r=new Et({props:{tag:s[20]}}),{c(){e=k("div"),te(r.$$.fragment),t=Y(),this.h()},l(n){e=x(n,"DIV",{class:!0});var f=E(e);re(r.$$.fragment,f),t=B(f),f.forEach(p),this.h()},h(){a(e,"class","tag-wrapper svelte-worc30")},m(n,f){X(n,e,f),le(r,e,null),m(e,t),l=!0},p(n,f){const o={};f&1&&(o.tag=n[20]),r.$set(o)},i(n){l||(C(r.$$.fragment,n),l=!0)},o(n){N(r.$$.fragment,n),l=!1},d(n){n&&p(e),se(r)}}}function vt(s){let e,r;return e=new Dt({props:{datetime:void 0,title:"Edit card",chosenTags:s[0].tags,done:s[0].checked,description:s[0].text,ts:s[0].date,docId:s[0].docId}}),e.$on("close",s[19]),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p(t,l){const n={};l&1&&(n.chosenTags=t[0].tags),l&1&&(n.done=t[0].checked),l&1&&(n.description=t[0].text),l&1&&(n.ts=t[0].date),l&1&&(n.docId=t[0].docId),e.$set(n)},i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function er(s){let e,r,t,l,n=s[2]?`${ie(s[2].getDate())}.${ie(s[2].getMonth()+1)}.${ie(s[2].getFullYear())}`:"Date",f,o,g,u=s[2]?`${ie(s[2].getHours())}:${ie(s[2].getMinutes())}`:"Time",i,d,c,h,v,I,D,L,A=s[0].text+"",w,b,M,y,j,T,H,ee,Z,O,ae,q,oe,be,W=s[0].tags,P=[];for(let _=0;_<W.length;_+=1)P[_]=pt(ht(s,W,_));const ue=_=>N(P[_],1,1,()=>{P[_]=null});let S=s[3]&&vt(s);return{c(){e=k("div"),r=k("header"),t=k("div"),l=k("div"),f=ce(n),o=Y(),g=k("div"),i=ce(u),d=Y(),c=k("div"),h=k("img"),I=Y(),D=k("main"),L=k("p"),w=ce(A),b=Y(),M=k("span"),y=k("input"),T=Y(),H=k("footer");for(let _=0;_<P.length;_+=1)P[_].c();O=Y(),S&&S.c(),ae=de(),this.h()},l(_){e=x(_,"DIV",{style:!0,class:!0,"data-id":!0});var z=E(e);r=x(z,"HEADER",{class:!0});var F=E(r);t=x(F,"DIV",{class:!0,style:!0});var J=E(t);l=x(J,"DIV",{class:!0});var me=E(l);f=fe(me,n),me.forEach(p),o=B(J),g=x(J,"DIV",{class:!0});var _e=E(g);i=fe(_e,u),_e.forEach(p),J.forEach(p),d=B(F),c=x(F,"DIV",{class:!0});var Ie=E(c);h=x(Ie,"IMG",{class:!0,alt:!0,src:!0}),Ie.forEach(p),F.forEach(p),I=B(z),D=x(z,"MAIN",{class:!0});var ne=E(D);L=x(ne,"P",{class:!0});var R=E(L);w=fe(R,A),R.forEach(p),b=B(ne),M=x(ne,"SPAN",{class:!0,for:!0});var Ae=E(M);y=x(Ae,"INPUT",{type:!0,name:!0,class:!0}),Ae.forEach(p),ne.forEach(p),T=B(z),H=x(z,"FOOTER",{class:!0});var V=E(H);for(let U=0;U<P.length;U+=1)P[U].l(V);V.forEach(p),z.forEach(p),O=B(_),S&&S.l(_),ae=de(),this.h()},h(){a(l,"class","date"),a(g,"class","time"),a(t,"class","date-div svelte-worc30"),ve(t,"color",s[1]),a(h,"class","w-4 svelte-worc30"),a(h,"alt","delete"),ze(h.src,v="/images/x.svg")||a(h,"src",v),a(c,"class","image svelte-worc30"),a(r,"class","svelte-worc30"),a(L,"class","svelte-worc30"),a(y,"type","checkbox"),a(y,"name","checked"),y.checked=j=s[0].checked,a(y,"class","svelte-worc30"),a(M,"class","w-5 svelte-worc30"),a(M,"for",""),a(D,"class","py-1 svelte-worc30"),a(H,"class","svelte-worc30"),ve(e,"left",s[6]+"px"),ve(e,"top",s[7]+"px"),a(e,"class",ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(s[0].checked?"checked":"")+" svelte-worc30"),a(e,"data-id",Z=s[0].docId),Ue(e,"draggable",s[8]===!0)},m(_,z){X(_,e,z),m(e,r),m(r,t),m(t,l),m(l,f),m(t,o),m(t,g),m(g,i),m(r,d),m(r,c),m(c,h),s[17](r),m(e,I),m(e,D),m(D,L),m(L,w),m(D,b),m(D,M),m(M,y),m(e,T),m(e,H);for(let F=0;F<P.length;F+=1)P[F].m(H,null);s[18](e),X(_,O,z),S&&S.m(_,z),X(_,ae,z),q=!0,oe||(be=[G(gt,"mouseup",s[14]),G(gt,"mousemove",s[13]),G(h,"click",Te(s[9])),G(r,"mousedown",s[16]),G(y,"click",Te(s[10])),G(D,"click",s[11]),G(H,"click",s[11])],oe=!0)},p(_,[z]){if((!q||z&4)&&n!==(n=_[2]?`${ie(_[2].getDate())}.${ie(_[2].getMonth()+1)}.${ie(_[2].getFullYear())}`:"Date")&&Ce(f,n),(!q||z&4)&&u!==(u=_[2]?`${ie(_[2].getHours())}:${ie(_[2].getMinutes())}`:"Time")&&Ce(i,u),(!q||z&2)&&ve(t,"color",_[1]),(!q||z&1)&&A!==(A=_[0].text+"")&&Ce(w,A),(!q||z&1&&j!==(j=_[0].checked))&&(y.checked=j),z&1){W=_[0].tags;let F;for(F=0;F<W.length;F+=1){const J=ht(_,W,F);P[F]?(P[F].p(J,z),C(P[F],1)):(P[F]=pt(J),P[F].c(),C(P[F],1),P[F].m(H,null))}for(he(),F=W.length;F<P.length;F+=1)ue(F);pe()}(!q||z&64)&&ve(e,"left",_[6]+"px"),(!q||z&128)&&ve(e,"top",_[7]+"px"),(!q||z&1&&ee!==(ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(_[0].checked?"checked":"")+" svelte-worc30"))&&a(e,"class",ee),(!q||z&1&&Z!==(Z=_[0].docId))&&a(e,"data-id",Z),z&257&&Ue(e,"draggable",_[8]===!0),_[3]?S?(S.p(_,z),z&8&&C(S,1)):(S=vt(_),S.c(),C(S,1),S.m(ae.parentNode,ae)):S&&(he(),N(S,1,1,()=>{S=null}),pe())},i(_){if(!q){for(let z=0;z<W.length;z+=1)C(P[z]);C(S),q=!0}},o(_){P=P.filter(Boolean);for(let z=0;z<P.length;z+=1)N(P[z]);N(S),q=!1},d(_){_&&p(e),s[17](null),Ge(P,_),s[18](null),_&&p(O),S&&S.d(_),_&&p(ae),oe=!1,Je(be)}}}function ie(s){return s>9?s.toString():`0${s.toString()}`}function tr(s,e,r){var j;let t,{card:l}=e,n=null,f=!1;l.date&&(n=new Date(((j=l.date)==null?void 0:j.seconds)*1e3));let o=Date.now();setInterval(()=>{r(15,o=Date.now())},1e4);function g(){!l.docId||(Rt(l.docId),l.date&&Ut(l.docId))}function u(){r(0,l.checked=!l.checked,l),l.docId&&Ht(l.docId,l.checked)}function i(){r(3,f=!0)}let d,c,h,v,I=!1;function D(){setTimeout(()=>{c&&window.getComputedStyle(c).cursor==="move"&&Ke.set("folder")},500),r(8,I=!0),r(6,h=d.getBoundingClientRect().left),r(7,v=d.getBoundingClientRect().top),l.docId&&Qe.set(l.docId)}function L(T){I&&($e(Le)?(r(6,h=T.clientX-40),r(7,v=T.clientY-30)):(r(6,h=T.clientX+5),r(7,v=T.clientY+5)))}function A(){r(8,I=!1),Qe.set("")}const w=T=>D();function b(T){Re[T?"unshift":"push"](()=>{c=T,r(5,c)})}function M(T){Re[T?"unshift":"push"](()=>{d=T,r(4,d)})}const y=()=>{r(3,f=!1)};return s.$$set=T=>{"card"in T&&r(0,l=T.card)},s.$$.update=()=>{s.$$.dirty&32769&&r(1,t=l.date?l.date.seconds*1e3-o>0?"black":"red":"black")},[l,t,n,f,d,c,h,v,I,g,u,i,D,L,A,o,w,b,M,y]}class rr extends xe{constructor(e){super(),ye(this,e,tr,er,Ee,{card:0})}}function bt(s){let e,r;return e=new Dt({props:{title:"New card"}}),e.$on("close",s[2]),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:Q,i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function lr(s){let e,r,t,l,n,f,o,g,u,i,d,c,h,v=s[0]&&bt(s);return{c(){e=k("div"),r=Pe("svg"),t=Pe("circle"),l=Pe("line"),n=Pe("line"),f=Y(),o=k("p"),g=ce("Add card"),u=Y(),v&&v.c(),i=de(),this.h()},l(I){e=x(I,"DIV",{class:!0});var D=E(e);r=Ye(D,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var L=E(r);t=Ye(L,"circle",{style:!0,cx:!0,cy:!0,r:!0}),E(t).forEach(p),l=Ye(L,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(l).forEach(p),n=Ye(L,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(n).forEach(p),L.forEach(p),f=B(D),o=x(D,"P",{class:!0});var A=E(o);g=fe(A,"Add card"),A.forEach(p),D.forEach(p),u=B(I),v&&v.l(I),i=de(),this.h()},h(){ve(t,"stroke-dasharray","3"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(l,"x1","12"),a(l,"y1","9.5"),a(l,"x2","12"),a(l,"y2","14.5"),a(n,"x1","9.5"),a(n,"y1","12"),a(n,"x2","14.5"),a(n,"y2","12"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"class","w-full spinner-hover svelte-1h0plr5"),a(r,"viewBox","0 0 24 24"),a(r,"fill","none"),a(r,"stroke","#000000"),a(r,"stroke-width","0.2"),a(r,"stroke-linecap","round"),a(r,"stroke-linejoin","round"),a(o,"class","w-full text-center mt-3 text-sm font-light"),a(e,"class","w-32 opacity-60 cursor-pointer")},m(I,D){X(I,e,D),m(e,r),m(r,t),m(r,l),m(r,n),m(e,f),m(e,o),m(o,g),X(I,u,D),v&&v.m(I,D),X(I,i,D),d=!0,c||(h=G(e,"click",s[1]),c=!0)},p(I,[D]){I[0]?v?(v.p(I,D),D&1&&C(v,1)):(v=bt(I),v.c(),C(v,1),v.m(i.parentNode,i)):v&&(he(),N(v,1,1,()=>{v=null}),pe())},i(I){d||(C(v),d=!0)},o(I){N(v),d=!1},d(I){I&&p(e),I&&p(u),v&&v.d(I),I&&p(i),c=!1,h()}}}function sr(s,e,r){let t=!1;function l(){r(0,t=!t)}return[t,l,()=>{r(0,t=!1)}]}class nr extends xe{constructor(e){super(),ye(this,e,sr,lr,Ee,{})}}function _t(s,e,r){const t=s.slice();return t[16]=e[r],t}function wt(s){let e,r,t,l,n,f,o,g,u=s[0],i=[];for(let d=0;d<u.length;d+=1)i[d]=kt(_t(s,u,d));return{c(){e=k("div");for(let d=0;d<i.length;d+=1)i[d].c();r=Y(),t=k("div"),l=ce("New folder"),this.h()},l(d){e=x(d,"DIV",{id:!0,class:!0});var c=E(e);for(let v=0;v<i.length;v+=1)i[v].l(c);r=B(c),t=x(c,"DIV",{class:!0});var h=E(t);l=fe(h,"New folder"),h.forEach(p),c.forEach(p),this.h()},h(){a(t,"class","folder new-folder svelte-1wez90j"),a(e,"id","panel"),a(e,"class","panel svelte-1wez90j")},m(d,c){X(d,e,c);for(let h=0;h<i.length;h+=1)i[h].m(e,null);m(e,r),m(e,t),m(t,l),s[14](e),f=!0,o||(g=G(t,"click",s[5]),o=!0)},p(d,c){if(c&4053){u=d[0];let h;for(h=0;h<u.length;h+=1){const v=_t(d,u,h);i[h]?i[h].p(v,c):(i[h]=kt(v),i[h].c(),i[h].m(e,r))}for(;h<i.length;h+=1)i[h].d(1);i.length=u.length}},i(d){f||(We(()=>{n||(n=ke(e,ct,{},!0)),n.run(1)}),f=!0)},o(d){n||(n=ke(e,ct,{},!1)),n.run(0),f=!1},d(d){d&&p(e),Ge(i,d),s[14](null),d&&n&&n.end(),o=!1,g()}}}function kt(s){let e,r=s[16].title+"",t,l,n,f,o;return{c(){e=k("div"),t=ce(r),this.h()},l(g){e=x(g,"DIV",{"data-id":!0,class:!0});var u=E(e);t=fe(u,r),u.forEach(p),this.h()},h(){a(e,"data-id",l=s[16].docId),a(e,"class",n="folder "+(s[2].docId===s[16].docId?"chosenFolder":"")+" svelte-1wez90j"),Ue(e,"isEditing",s[4]&&s[2].docId===s[16].docId)},m(g,u){X(g,e,u),m(e,t),f||(o=[G(e,"mouseup",s[12]),G(e,"mouseenter",s[13]),G(e,"mouseleave",s[11]),G(e,"dblclick",Te(ot(s[7]))),G(e,"keypress",s[6]),G(e,"click",ot(s[8]))],f=!0)},p(g,u){u&1&&r!==(r=g[16].title+"")&&Ce(t,r),u&1&&l!==(l=g[16].docId)&&a(e,"data-id",l),u&5&&n!==(n="folder "+(g[2].docId===g[16].docId?"chosenFolder":"")+" svelte-1wez90j")&&a(e,"class",n),u&21&&Ue(e,"isEditing",g[4]&&g[2].docId===g[16].docId)},d(g){g&&p(e),f=!1,Je(o)}}}function or(s){let e,r,t=s[1]&&wt(s);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,n){t&&t.m(l,n),X(l,e,n),r=!0},p(l,[n]){l[1]?t?(t.p(l,n),n&2&&C(t,1)):(t=wt(l),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(he(),N(t,1,1,()=>{t=null}),pe())},i(l){r||(C(t),r=!0)},o(l){N(t),r=!1},d(l){t&&t.d(l),l&&p(e)}}}function ar(s,e,r){let t;Ct(s,Qe,w=>r(15,t=w));let{folders:l=[]}=e,{isVisible:n=!1}=e,{currentFolder:f}=e,o,g=!1;Ze(()=>{Ke.subscribe(w=>{w==="folder"?r(1,n=!0):(r(1,n=!1),It().then(b=>{r(0,l=b)}))})});function u(){r(0,l=[...l,{title:""}]),setTimeout(()=>{r(3,o.scrollTop=o.scrollHeight,o),o.children[o.children.length-2].dispatchEvent(new Event("dblclick")),r(4,g=!1)},0)}async function i(w){const b=w.target;if(w.key==="Enter"){if(w.preventDefault(),b.onblur=null,b.contentEditable="false",r(4,g=!1),b.innerText.trim()===""&&b.getAttribute("data-id")){qt(b.getAttribute("data-id")),b.style.display="none";return}if(b.innerText.trim()===""&&!b.getAttribute("data-id")){b.style.display="none";return}const M=b.style.backgroundColor;if(b.style.backgroundColor="rgb(20 221 65 / 45%)",b.getAttribute("data-id"))ft({docId:b.getAttribute("data-id"),title:b.innerText.trim()});else{const y=b.innerText.trim();ft({title:y}).then(j=>b.setAttribute("data-id",j))}setTimeout(()=>{b.style.backgroundColor=M},1e3)}}function d(w){const b=w.target;if(b.contentEditable==="true")return;b.focus();const M=b.innerText;r(4,g=!0),b.onblur=async()=>{b.contentEditable="false",r(4,g=!1),M?b.innerText=M:b.style.display="none"},b.contentEditable="true",b.focus()}function c(w){const b=w.target;!b.getAttribute("data-id")||(Gt(b.getAttribute("data-id")),r(2,f.docId=b.getAttribute("data-id"),f),document.querySelectorAll(".chosenFolder").forEach(M=>M.classList.remove("chosenFolder")),b.classList.add("chosenFolder"))}function h(w){const b=w.target,M=t,y=b.dataset.id;if(y&&M){Ot(M,y);const j=document.querySelector(`[data-id="${t}"]`);j&&(j.style.display="none",Le.set(!1))}}function v(){const w=document.querySelector(`[data-id="${t}"]`);w&&(w.style.transform="scale(0.6)",w.style.filter="brightness(0.95)",Le.set(!0))}function I(){const w=document.querySelector(`[data-id="${t}"]`);w&&(w.style.transform="scale(1)",w.style.filter="brightness(1)",Le.set(!1))}const D=w=>h(w),L=()=>{v()};function A(w){Re[w?"unshift":"push"](()=>{o=w,r(3,o)})}return s.$$set=w=>{"folders"in w&&r(0,l=w.folders),"isVisible"in w&&r(1,n=w.isVisible),"currentFolder"in w&&r(2,f=w.currentFolder)},[l,n,f,o,g,u,i,d,c,h,v,I,D,L,A]}class ir extends xe{constructor(e){super(),ye(this,e,ar,or,Ee,{folders:0,isVisible:1,currentFolder:2})}}function xt(s,e,r){const t=s.slice();return t[7]=e[r],t}function cr(s){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function fr(s){let e,r;return e=new ir({props:{folders:s[0],currentFolder:{docId:s[10].currentFolder,title:""}}}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p(t,l){const n={};l&1&&(n.folders=t[0]),e.$set(n)},i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function dr(s){return{c:Q,l:Q,m:Q,p:Q,i:Q,o:Q,d:Q}}function ur(s){let e,r;return e=new Zt({}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:Q,i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function mr(s){let e,r,t,l,n;t=new nr({}),t.$on("click",s[5]);let f=s[1],o=[];for(let u=0;u<f.length;u+=1)o[u]=yt(xt(s,f,u));const g=u=>N(o[u],1,1,()=>{o[u]=null});return{c(){e=k("div"),r=k("div"),te(t.$$.fragment),l=Y();for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=x(u,"DIV",{class:!0});var i=E(e);r=x(i,"DIV",{class:!0});var d=E(r);re(t.$$.fragment,d),d.forEach(p),l=B(i);for(let c=0;c<o.length;c+=1)o[c].l(i);i.forEach(p),this.h()},h(){a(r,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center"),a(e,"class","flex flex-wrap justify-center lg:p-12 mg:p-6 p-3")},m(u,i){X(u,e,i),m(e,r),le(t,r,null),m(e,l);for(let d=0;d<o.length;d+=1)o[d].m(e,null);n=!0},p(u,i){if(i&2){f=u[1];let d;for(d=0;d<f.length;d+=1){const c=xt(u,f,d);o[d]?(o[d].p(c,i),C(o[d],1)):(o[d]=yt(c),o[d].c(),C(o[d],1),o[d].m(e,null))}for(he(),d=f.length;d<o.length;d+=1)g(d);pe()}},i(u){if(!n){C(t.$$.fragment,u);for(let i=0;i<f.length;i+=1)C(o[i]);n=!0}},o(u){N(t.$$.fragment,u),o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)N(o[i]);n=!1},d(u){u&&p(e),se(t),Ge(o,u)}}}function gr(s){let e,r;return e=new $t({}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:Q,i(t){r||(C(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function yt(s){let e,r,t,l;return r=new rr({props:{card:s[7]}}),{c(){e=k("div"),te(r.$$.fragment),t=Y(),this.h()},l(n){e=x(n,"DIV",{class:!0});var f=E(e);re(r.$$.fragment,f),t=B(f),f.forEach(p),this.h()},h(){a(e,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center")},m(n,f){X(n,e,f),le(r,e,null),m(e,t),l=!0},p(n,f){const o={};f&2&&(o.card=n[7]),r.$set(o)},i(n){l||(C(r.$$.fragment,n),l=!0)},o(n){N(r.$$.fragment,n),l=!1},d(n){n&&p(e),se(r)}}}function hr(s){let e,r,t,l,n,f,o;e=new Xt({}),e.$on("filter",s[4]);let g={ctx:s,current:null,token:null,hasCatch:!1,pending:dr,then:fr,catch:cr,value:10,blocks:[,,,]};Tt(qe(),g);const u=[gr,mr,ur],i=[];function d(c,h){return c[2]?0:c[1]?1:2}return l=d(s),n=i[l]=u[l](s),{c(){te(e.$$.fragment),r=Y(),g.block.c(),t=Y(),n.c(),f=de()},l(c){re(e.$$.fragment,c),r=B(c),g.block.l(c),t=B(c),n.l(c),f=de()},m(c,h){le(e,c,h),X(c,r,h),g.block.m(c,g.anchor=h),g.mount=()=>t.parentNode,g.anchor=t,X(c,t,h),i[l].m(c,h),X(c,f,h),o=!0},p(c,[h]){s=c,At(g,s,h);let v=l;l=d(s),l===v?i[l].p(s,h):(he(),N(i[v],1,1,()=>{i[v]=null}),pe(),n=i[l],n?n.p(s,h):(n=i[l]=u[l](s),n.c()),C(n,1),n.m(f.parentNode,f))},i(c){o||(C(e.$$.fragment,c),C(g.block),C(n),o=!0)},o(c){N(e.$$.fragment,c);for(let h=0;h<3;h+=1){const v=g.blocks[h];N(v)}N(n),o=!1},d(c){se(e,c),c&&p(r),g.block.d(c),g.token=null,g=null,c&&p(t),i[l].d(c),c&&p(f)}}}function pr(s,e,r){let t,l,n=!0,f;function o(i){r(1,l=l==null?void 0:l.filter(d=>(i.completed?d.checked===i.completed:!0)&&(d.date?i.till?d.date<=i.till:!0:!i.till)&&i.tags.every(c=>d.tags.some(h=>h.text===c.text))&&(i.text?d.text.includes(i.text):!0)))}Ze(async()=>{if(Xe())at(Mt(it(),"users",Xe().uid),async()=>{r(2,n=!0),Be().then(i=>{r(1,l=i),$e(Ve)&&o(f),r(2,n=!1)}),(await qe()).currentFolder&&at(Nt(it(),"users",Xe().uid,"folders",(await qe()).currentFolder,"items"),()=>{r(2,n=!0),Be().then(i=>{r(1,l=i),$e(Ve)&&o(f),r(2,n=!1)})})});else{window.location.href="/login";return}r(1,l=await Be()),r(2,n=!1),It().then(i=>{r(0,t=i)})}),Ve.subscribe(async i=>{i&&(r(1,l=await Be()),o(f))});const g=i=>{r(3,f=i.detail),Ve.set(!1),Ve.set(!0)};function u(i){Ft.call(this,s,i)}return[t,l,n,f,g,u]}class xr extends xe{constructor(e){super(),ye(this,e,pr,hr,Ee,{})}}export{xr as default};
