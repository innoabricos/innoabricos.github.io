import{S as Ee,i as Ie,s as De,e as w,k as R,c as E,a as D,d as _,m as U,M as Te,b as o,g as $,L as h,E as W,N as Ze,O as we,l as ue,q as A,n as ge,o as B,p as _e,v as Je,P as qe,w as te,x as le,y as re,B as se,t as ce,h as fe,Q as je,R as z,T as Fe,j as Ae,U as ze,V as Ke,W as Ct,f as ve,X as Ye,Y as Tt,Z as Qe,_ as Le,$ as Re,a0 as at,a1 as At,F as Ft,G as Mt,a2 as Nt}from"../chunks/index-b7066284.js";import{u as St,g as $e,E as ot,D as Pt,B as it,V as Bt}from"../chunks/firebase-d9cec40e.js";import{o as xe,f as Ge,M as jt,S as Lt,C as Rt,g as Oe,T as Dt,u as Ut,s as Ht,d as qt,a as Yt,c as Gt,b as We,i as He,e as yt,h as ct,j as Ot,k as ft,l as zt,m as Xt,N as $t,n as Ue,p as Ce}from"../chunks/Navbar-81b60c26.js";import{P as Qt}from"../chunks/ProgressIndicator-e03e5201.js";import"../chunks/index-68a179b3.js";function ut(s){let e,l,t,r,n,f,a,m,d,i,u,c,g,v,y,V,H;return{c(){e=w("div"),l=w("div"),t=w("div"),r=w("img"),f=R(),a=w("div"),m=w("div"),d=w("img"),u=R(),c=w("div"),g=w("div"),v=w("img"),this.h()},l(M){e=E(M,"DIV",{class:!0,id:!0});var k=D(e);l=E(k,"DIV",{class:!0});var p=D(l);t=E(p,"DIV",{class:!0});var P=D(t);r=E(P,"IMG",{src:!0,alt:!0}),P.forEach(_),p.forEach(_),f=U(k),a=E(k,"DIV",{class:!0});var I=D(a);m=E(I,"DIV",{class:!0});var S=D(m);d=E(S,"IMG",{src:!0,alt:!0}),S.forEach(_),I.forEach(_),u=U(k),c=E(k,"DIV",{class:!0});var F=D(c);g=E(F,"DIV",{class:!0});var G=D(g);v=E(G,"IMG",{src:!0,alt:!0}),G.forEach(_),F.forEach(_),k.forEach(_),this.h()},h(){Te(r.src,n="/images/arrow.png")||o(r,"src",n),o(r,"alt","arrow"),o(t,"class","arrow svelte-arkf3m"),o(l,"class","arrowSliding svelte-arkf3m"),Te(d.src,i="/images/arrow.png")||o(d,"src",i),o(d,"alt","arrow"),o(m,"class","arrow svelte-arkf3m"),o(a,"class","arrowSliding delay1 svelte-arkf3m"),Te(v.src,y="/images/arrow.png")||o(v,"src",y),o(v,"alt","arrow"),o(g,"class","arrow svelte-arkf3m"),o(c,"class","arrowSliding delay2 svelte-arkf3m"),o(e,"class","mr-3 svelte-arkf3m"),o(e,"id","arrowAnim")},m(M,k){$(M,e,k),h(e,l),h(l,t),h(t,r),h(e,f),h(e,a),h(a,m),h(m,d),h(e,u),h(e,c),h(c,g),h(g,v),s[2](e),H=!0},p:W,i(M){H||(Ze(()=>{V||(V=we(e,Ge,{},!0)),V.run(1)}),H=!0)},o(M){V||(V=we(e,Ge,{},!1)),V.run(0),H=!1},d(M){M&&_(e),s[2](null),M&&V&&V.end()}}}function Wt(s){let e,l,t=s[1]&&ut(s);return{c(){t&&t.c(),e=ue()},l(r){t&&t.l(r),e=ue()},m(r,n){t&&t.m(r,n),$(r,e,n),l=!0},p(r,[n]){r[1]?t?(t.p(r,n),n&2&&A(t,1)):(t=ut(r),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(ge(),B(t,1,1,()=>{t=null}),_e())},i(r){l||(A(t),l=!0)},o(r){B(t),l=!1},d(r){t&&t.d(r),r&&_(e)}}}function Zt(s,e,l){let t,r=!0;Je(()=>{xe.subscribe(f=>{f==="folder"?l(1,r=!1):setTimeout(()=>{l(1,r=!0)},200)})});function n(f){qe[f?"unshift":"push"](()=>{t=f,l(0,t)})}return[t,r,n]}class Jt extends Ee{constructor(e){super(),Ie(this,e,Zt,Wt,De,{})}}function dt(s,e,l){const t=s.slice();return t[19]=e[l],t}function ht(s){let e,l,t;return l=new Dt({props:{tag:s[19]}}),{c(){e=w("div"),te(l.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0});var n=D(e);le(l.$$.fragment,n),n.forEach(_),this.h()},h(){o(e,"class","tag-tag svelte-1fix5m")},m(r,n){$(r,e,n),re(l,e,null),t=!0},p(r,n){const f={};n&8&&(f.tag=r[19]),l.$set(f)},i(r){t||(A(l.$$.fragment,r),t=!0)},o(r){B(l.$$.fragment,r),t=!1},d(r){r&&_(e),se(l)}}}function Kt(s){let e,l,t,r,n,f,a,m,d,i,u,c,g,v,y,V,H,M,k,p,P,I,S,F,G,ee,J,X,oe,O,ae,pe,Z,L,de,j,b,T,N,K,he,be,ye;X=new jt({props:{chosenTags:s[3],tags:s[5],isVisible:s[6]}}),X.$on("handleChosenTag",s[8]);let ne=s[3],q=[];for(let C=0;C<ne.length;C+=1)q[C]=ht(dt(s,ne,C));const Me=C=>B(q[C],1,1,()=>{q[C]=null});return b=new Lt({}),b.$on("click",s[9]),N=new Rt({}),N.$on("click",s[16]),{c(){e=w("div"),l=w("div"),t=w("header"),r=w("span"),n=ce(s[4]),f=R(),a=w("main"),m=w("label"),d=w("span"),i=ce("Done:"),u=R(),c=w("input"),g=R(),v=w("label"),y=w("span"),V=ce("Notification:"),H=R(),M=w("input"),k=R(),p=w("label"),P=w("span"),I=ce("Tags:"),S=R(),F=w("img"),ee=R(),J=w("div"),te(X.$$.fragment),oe=R(),O=w("div"),ae=w("div");for(let C=0;C<q.length;C+=1)q[C].c();pe=R(),Z=w("textarea"),L=R(),de=w("footer"),j=w("div"),te(b.$$.fragment),T=R(),te(N.$$.fragment),this.h()},l(C){e=E(C,"DIV",{class:!0});var Y=D(e);l=E(Y,"DIV",{class:!0});var x=D(l);t=E(x,"HEADER",{class:!0});var Q=D(t);r=E(Q,"SPAN",{});var Ve=D(r);n=fe(Ve,s[4]),Ve.forEach(_),Q.forEach(_),f=U(x),a=E(x,"MAIN",{class:!0});var me=D(a);m=E(me,"LABEL",{for:!0,class:!0});var Ne=D(m);d=E(Ne,"SPAN",{class:!0});var et=D(d);i=fe(et,"Done:"),et.forEach(_),u=U(Ne),c=E(Ne,"INPUT",{id:!0,type:!0,class:!0}),Ne.forEach(_),g=U(me),v=E(me,"LABEL",{for:!0,class:!0});var Se=D(v);y=E(Se,"SPAN",{class:!0});var tt=D(y);V=fe(tt,"Notification:"),tt.forEach(_),H=U(Se),M=E(Se,"INPUT",{id:!0,type:!0,class:!0}),Se.forEach(_),k=U(me),p=E(me,"LABEL",{for:!0,class:!0});var ke=D(p);P=E(ke,"SPAN",{class:!0});var lt=D(P);I=fe(lt,"Tags:"),lt.forEach(_),S=U(ke),F=E(ke,"IMG",{alt:!0,src:!0,class:!0}),ee=U(ke),J=E(ke,"DIV",{class:!0});var rt=D(J);le(X.$$.fragment,rt),rt.forEach(_),ke.forEach(_),oe=U(me),O=E(me,"DIV",{class:!0});var Pe=D(O);ae=E(Pe,"DIV",{class:!0});var st=D(ae);for(let Xe=0;Xe<q.length;Xe+=1)q[Xe].l(st);st.forEach(_),pe=U(Pe),Z=E(Pe,"TEXTAREA",{placeholder:!0,class:!0}),D(Z).forEach(_),Pe.forEach(_),me.forEach(_),L=U(x),de=E(x,"FOOTER",{class:!0});var nt=D(de);j=E(nt,"DIV",{class:!0});var Be=D(j);le(b.$$.fragment,Be),T=U(Be),le(N.$$.fragment,Be),Be.forEach(_),nt.forEach(_),x.forEach(_),Y.forEach(_),this.h()},h(){o(t,"class","svelte-1fix5m"),o(d,"class","svelte-1fix5m"),o(c,"id","done"),o(c,"type","checkbox"),o(c,"class","svelte-1fix5m"),o(m,"for","done"),o(m,"class","svelte-1fix5m"),o(y,"class","svelte-1fix5m"),o(M,"id","notify"),o(M,"type","datetime-local"),o(M,"class","svelte-1fix5m"),o(v,"for","notify"),o(v,"class","svelte-1fix5m"),o(P,"class","svelte-1fix5m"),o(F,"alt","plus"),Te(F.src,G="images/plus.svg")||o(F,"src",G),o(F,"class","svelte-1fix5m"),o(J,"class","multiselect svelte-1fix5m"),o(p,"for","tags"),o(p,"class","svelte-1fix5m"),o(ae,"class","tags svelte-1fix5m"),o(Z,"placeholder","Enter description"),o(Z,"class","svelte-1fix5m"),o(O,"class","changeable svelte-1fix5m"),o(a,"class","svelte-1fix5m"),o(j,"class","buttons svelte-1fix5m"),o(de,"class","svelte-1fix5m"),o(l,"class","center-block svelte-1fix5m"),o(e,"class","background svelte-1fix5m")},m(C,Y){$(C,e,Y),h(e,l),h(l,t),h(t,r),h(r,n),h(l,f),h(l,a),h(a,m),h(m,d),h(d,i),h(m,u),h(m,c),c.checked=s[0],h(a,g),h(a,v),h(v,y),h(y,V),h(v,H),h(v,M),je(M,s[1]),h(a,k),h(a,p),h(p,P),h(P,I),h(p,S),h(p,F),h(p,ee),h(p,J),re(X,J,null),h(a,oe),h(a,O),h(O,ae);for(let x=0;x<q.length;x+=1)q[x].m(ae,null);h(O,pe),h(O,Z),je(Z,s[2]),h(l,L),h(l,de),h(de,j),re(b,j,null),h(j,T),re(N,j,null),he=!0,be||(ye=[z(c,"change",s[12]),z(M,"input",s[13]),z(F,"click",Fe(s[14])),z(Z,"input",s[15]),z(l,"click",Fe(s[17]))],be=!0)},p(C,[Y]){(!he||Y&16)&&Ae(n,C[4]),Y&1&&(c.checked=C[0]),Y&2&&je(M,C[1]);const x={};if(Y&8&&(x.chosenTags=C[3]),Y&32&&(x.tags=C[5]),Y&64&&(x.isVisible=C[6]),X.$set(x),Y&8){ne=C[3];let Q;for(Q=0;Q<ne.length;Q+=1){const Ve=dt(C,ne,Q);q[Q]?(q[Q].p(Ve,Y),A(q[Q],1)):(q[Q]=ht(Ve),q[Q].c(),A(q[Q],1),q[Q].m(ae,null))}for(ge(),Q=ne.length;Q<q.length;Q+=1)Me(Q);_e()}Y&4&&je(Z,C[2])},i(C){if(!he){A(X.$$.fragment,C);for(let Y=0;Y<ne.length;Y+=1)A(q[Y]);A(b.$$.fragment,C),A(N.$$.fragment,C),Ze(()=>{K||(K=we(l,Ge,{},!0)),K.run(1)}),he=!0}},o(C){B(X.$$.fragment,C),q=q.filter(Boolean);for(let Y=0;Y<q.length;Y+=1)B(q[Y]);B(b.$$.fragment,C),B(N.$$.fragment,C),K||(K=we(l,Ge,{},!1)),K.run(0),he=!1},d(C){C&&_(e),se(X),ze(q,C),se(b),se(N),C&&K&&K.end(),be=!1,Ke(ye)}}}function xt(s,e,l){const t=Ct();let{done:r=!1}=e,{datetime:n}=e,{ts:f}=e,{description:a}=e,{chosenTags:m=[]}=e,{title:d}=e,{docId:i}=e,u=[];function c(I){const S=new Date(I.seconds*1e3),F=`${S.getFullYear()}`;let G=`${S.getMonth()+1}`;G.length===1&&(G=`0${G}`);let ee=`${S.getDate()}`;ee.length===1&&(ee=`0${ee}`);let J=`${S.getHours()}`;J.length===1&&(J=`0${J}`);let X=`${S.getMinutes()}`;X.length===1&&(X=`0${X}`),l(1,n=`${F}-${G}-${ee}T${J}:${X}`)}f&&c(f),Oe().then(I=>{l(5,u=I.tags)});let g=!1;function v(I){I.detail.checked?l(3,m=[...m,I.detail.tag]):l(3,m=m.filter(S=>S.text!==I.detail.tag.text))}async function y(){let I;if(!a)return;const S={checked:r,text:a,tags:m};if(n){const G=new Date(n);I=St.fromDate(new Date(G.getFullYear(),G.getMonth(),G.getDate(),G.getHours(),G.getMinutes()))}I&&(S.date=I),i&&(S.docId=i);const F=await Ut(S);t("close"),S.docId&&n&&await Ht(n,F,a),t("close")}function V(){r=this.checked,l(0,r)}function H(){n=this.value,l(1,n)}const M=()=>{l(6,g=!g)};function k(){a=this.value,l(2,a)}const p=()=>t("close"),P=()=>{l(6,g=!1)};return s.$$set=I=>{"done"in I&&l(0,r=I.done),"datetime"in I&&l(1,n=I.datetime),"ts"in I&&l(10,f=I.ts),"description"in I&&l(2,a=I.description),"chosenTags"in I&&l(3,m=I.chosenTags),"title"in I&&l(4,d=I.title),"docId"in I&&l(11,i=I.docId)},[r,n,a,m,d,u,g,t,v,y,f,i,V,H,M,k,p,P]}class Vt extends Ee{constructor(e){super(),Ie(this,e,xt,Kt,De,{done:0,datetime:1,ts:10,description:2,chosenTags:3,title:4,docId:11})}}const{window:mt}=Tt;function gt(s,e,l){const t=s.slice();return t[20]=e[l],t}function _t(s){let e,l,t,r;return l=new Dt({props:{tag:s[20]}}),{c(){e=w("div"),te(l.$$.fragment),t=R(),this.h()},l(n){e=E(n,"DIV",{class:!0});var f=D(e);le(l.$$.fragment,f),t=U(f),f.forEach(_),this.h()},h(){o(e,"class","tag-wrapper svelte-worc30")},m(n,f){$(n,e,f),re(l,e,null),h(e,t),r=!0},p(n,f){const a={};f&1&&(a.tag=n[20]),l.$set(a)},i(n){r||(A(l.$$.fragment,n),r=!0)},o(n){B(l.$$.fragment,n),r=!1},d(n){n&&_(e),se(l)}}}function vt(s){let e,l;return e=new Vt({props:{datetime:void 0,title:"Edit card",chosenTags:s[0].tags,done:s[0].checked,description:s[0].text,ts:s[0].date,docId:s[0].docId}}),e.$on("close",s[19]),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const n={};r&1&&(n.chosenTags=t[0].tags),r&1&&(n.done=t[0].checked),r&1&&(n.description=t[0].text),r&1&&(n.ts=t[0].date),r&1&&(n.docId=t[0].docId),e.$set(n)},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function el(s){let e,l,t,r,n=s[2]?`${ie(s[2].getDate())}.${ie(s[2].getMonth()+1)}.${ie(s[2].getFullYear())}`:"Date",f,a,m,d=s[2]?`${ie(s[2].getHours())}:${ie(s[2].getMinutes())}`:"Time",i,u,c,g,v,y,V,H,M=s[0].text+"",k,p,P,I,S,F,G,ee,J,X,oe,O,ae,pe,Z=s[0].tags,L=[];for(let b=0;b<Z.length;b+=1)L[b]=_t(gt(s,Z,b));const de=b=>B(L[b],1,1,()=>{L[b]=null});let j=s[3]&&vt(s);return{c(){e=w("div"),l=w("header"),t=w("div"),r=w("div"),f=ce(n),a=R(),m=w("div"),i=ce(d),u=R(),c=w("div"),g=w("img"),y=R(),V=w("main"),H=w("p"),k=ce(M),p=R(),P=w("span"),I=w("input"),F=R(),G=w("footer");for(let b=0;b<L.length;b+=1)L[b].c();X=R(),j&&j.c(),oe=ue(),this.h()},l(b){e=E(b,"DIV",{style:!0,class:!0,"data-id":!0});var T=D(e);l=E(T,"HEADER",{class:!0});var N=D(l);t=E(N,"DIV",{class:!0,style:!0});var K=D(t);r=E(K,"DIV",{class:!0});var he=D(r);f=fe(he,n),he.forEach(_),a=U(K),m=E(K,"DIV",{class:!0});var be=D(m);i=fe(be,d),be.forEach(_),K.forEach(_),u=U(N),c=E(N,"DIV",{class:!0});var ye=D(c);g=E(ye,"IMG",{class:!0,alt:!0,src:!0}),ye.forEach(_),N.forEach(_),y=U(T),V=E(T,"MAIN",{class:!0});var ne=D(V);H=E(ne,"P",{class:!0});var q=D(H);k=fe(q,M),q.forEach(_),p=U(ne),P=E(ne,"SPAN",{class:!0,for:!0});var Me=D(P);I=E(Me,"INPUT",{type:!0,name:!0,class:!0}),Me.forEach(_),ne.forEach(_),F=U(T),G=E(T,"FOOTER",{class:!0});var C=D(G);for(let Y=0;Y<L.length;Y+=1)L[Y].l(C);C.forEach(_),T.forEach(_),X=U(b),j&&j.l(b),oe=ue(),this.h()},h(){o(r,"class","date"),o(m,"class","time"),o(t,"class","date-div svelte-worc30"),ve(t,"color",s[1]),o(g,"class","w-4 svelte-worc30"),o(g,"alt","delete"),Te(g.src,v="/images/x.svg")||o(g,"src",v),o(c,"class","image svelte-worc30"),o(l,"class","svelte-worc30"),o(H,"class","svelte-worc30"),o(I,"type","checkbox"),o(I,"name","checked"),I.checked=S=s[0].checked,o(I,"class","svelte-worc30"),o(P,"class","w-5 svelte-worc30"),o(P,"for",""),o(V,"class","py-1 svelte-worc30"),o(G,"class","svelte-worc30"),ve(e,"left",s[6]+"px"),ve(e,"top",s[7]+"px"),o(e,"class",ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(s[0].checked?"checked":"")+" svelte-worc30"),o(e,"data-id",J=s[0].docId),Ye(e,"draggable",s[8]===!0)},m(b,T){$(b,e,T),h(e,l),h(l,t),h(t,r),h(r,f),h(t,a),h(t,m),h(m,i),h(l,u),h(l,c),h(c,g),s[17](l),h(e,y),h(e,V),h(V,H),h(H,k),h(V,p),h(V,P),h(P,I),h(e,F),h(e,G);for(let N=0;N<L.length;N+=1)L[N].m(G,null);s[18](e),$(b,X,T),j&&j.m(b,T),$(b,oe,T),O=!0,ae||(pe=[z(mt,"mouseup",s[14]),z(mt,"mousemove",s[13]),z(g,"click",Fe(s[9])),z(l,"mousedown",s[16]),z(I,"click",Fe(s[10])),z(V,"click",s[11]),z(G,"click",s[11])],ae=!0)},p(b,[T]){if((!O||T&4)&&n!==(n=b[2]?`${ie(b[2].getDate())}.${ie(b[2].getMonth()+1)}.${ie(b[2].getFullYear())}`:"Date")&&Ae(f,n),(!O||T&4)&&d!==(d=b[2]?`${ie(b[2].getHours())}:${ie(b[2].getMinutes())}`:"Time")&&Ae(i,d),(!O||T&2)&&ve(t,"color",b[1]),(!O||T&1)&&M!==(M=b[0].text+"")&&Ae(k,M),(!O||T&1&&S!==(S=b[0].checked))&&(I.checked=S),T&1){Z=b[0].tags;let N;for(N=0;N<Z.length;N+=1){const K=gt(b,Z,N);L[N]?(L[N].p(K,T),A(L[N],1)):(L[N]=_t(K),L[N].c(),A(L[N],1),L[N].m(G,null))}for(ge(),N=Z.length;N<L.length;N+=1)de(N);_e()}(!O||T&64)&&ve(e,"left",b[6]+"px"),(!O||T&128)&&ve(e,"top",b[7]+"px"),(!O||T&1&&ee!==(ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(b[0].checked?"checked":"")+" svelte-worc30"))&&o(e,"class",ee),(!O||T&1&&J!==(J=b[0].docId))&&o(e,"data-id",J),T&257&&Ye(e,"draggable",b[8]===!0),b[3]?j?(j.p(b,T),T&8&&A(j,1)):(j=vt(b),j.c(),A(j,1),j.m(oe.parentNode,oe)):j&&(ge(),B(j,1,1,()=>{j=null}),_e())},i(b){if(!O){for(let T=0;T<Z.length;T+=1)A(L[T]);A(j),O=!0}},o(b){L=L.filter(Boolean);for(let T=0;T<L.length;T+=1)B(L[T]);B(j),O=!1},d(b){b&&_(e),s[17](null),ze(L,b),s[18](null),b&&_(X),j&&j.d(b),b&&_(oe),ae=!1,Ke(pe)}}}function ie(s){return s>9?s.toString():`0${s.toString()}`}function tl(s,e,l){var S;let t,{card:r}=e,n=null,f=!1;r.date&&(n=new Date(((S=r.date)==null?void 0:S.seconds)*1e3));let a=Date.now();setInterval(()=>{l(15,a=Date.now())},1e4);function m(){!r.docId||(qt(r.docId),r.date&&Yt(r.docId))}function d(){l(0,r.checked=!r.checked,r),r.docId&&Gt(r.docId,r.checked)}function i(){l(3,f=!0)}let u,c,g,v,y=!1;function V(){setTimeout(()=>{c&&window.getComputedStyle(c).cursor==="move"&&xe.set("folder")},500),l(8,y=!0),l(6,g=u.getBoundingClientRect().left),l(7,v=u.getBoundingClientRect().top),r.docId&&We.set(r.docId)}function H(F){y&&(Qe(He)?(l(6,g=F.clientX-40),l(7,v=F.clientY-30)):(l(6,g=F.clientX+5),l(7,v=F.clientY+5)))}function M(){l(8,y=!1),We.set("")}const k=F=>V();function p(F){qe[F?"unshift":"push"](()=>{c=F,l(5,c)})}function P(F){qe[F?"unshift":"push"](()=>{u=F,l(4,u)})}const I=()=>{l(3,f=!1)};return s.$$set=F=>{"card"in F&&l(0,r=F.card)},s.$$.update=()=>{s.$$.dirty&32769&&l(1,t=r.date?r.date.seconds*1e3-a>0?"black":"red":"black")},[r,t,n,f,u,c,g,v,y,m,d,i,V,H,M,a,k,p,P,I]}class ll extends Ee{constructor(e){super(),Ie(this,e,tl,el,De,{card:0})}}function pt(s){let e,l;return e=new Vt({props:{title:"New card"}}),e.$on("close",s[2]),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:W,i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function rl(s){let e,l,t,r,n,f,a,m,d,i,u,c,g,v=s[0]&&pt(s);return{c(){e=w("div"),l=Le("svg"),t=Le("circle"),r=Le("line"),n=Le("line"),f=R(),a=w("p"),m=ce("Add card"),d=R(),v&&v.c(),i=ue(),this.h()},l(y){e=E(y,"DIV",{class:!0});var V=D(e);l=Re(V,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var H=D(l);t=Re(H,"circle",{style:!0,cx:!0,cy:!0,r:!0}),D(t).forEach(_),r=Re(H,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(r).forEach(_),n=Re(H,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(n).forEach(_),H.forEach(_),f=U(V),a=E(V,"P",{class:!0});var M=D(a);m=fe(M,"Add card"),M.forEach(_),V.forEach(_),d=U(y),v&&v.l(y),i=ue(),this.h()},h(){ve(t,"stroke-dasharray","3"),o(t,"cx","12"),o(t,"cy","12"),o(t,"r","10"),o(r,"x1","12"),o(r,"y1","9.5"),o(r,"x2","12"),o(r,"y2","14.5"),o(n,"x1","9.5"),o(n,"y1","12"),o(n,"x2","14.5"),o(n,"y2","12"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","w-full spinner-hover svelte-1h0plr5"),o(l,"viewBox","0 0 24 24"),o(l,"fill","none"),o(l,"stroke","#000000"),o(l,"stroke-width","0.2"),o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(a,"class","w-full text-center mt-3 text-sm font-light"),o(e,"class","w-32 opacity-60 cursor-pointer")},m(y,V){$(y,e,V),h(e,l),h(l,t),h(l,r),h(l,n),h(e,f),h(e,a),h(a,m),$(y,d,V),v&&v.m(y,V),$(y,i,V),u=!0,c||(g=z(e,"click",s[1]),c=!0)},p(y,[V]){y[0]?v?(v.p(y,V),V&1&&A(v,1)):(v=pt(y),v.c(),A(v,1),v.m(i.parentNode,i)):v&&(ge(),B(v,1,1,()=>{v=null}),_e())},i(y){u||(A(v),u=!0)},o(y){B(v),u=!1},d(y){y&&_(e),y&&_(d),v&&v.d(y),y&&_(i),c=!1,g()}}}function sl(s,e,l){let t=!1;function r(){l(0,t=!t)}return[t,r,()=>{l(0,t=!1)}]}class nl extends Ee{constructor(e){super(),Ie(this,e,sl,rl,De,{})}}function bt(s,e,l){const t=s.slice();return t[16]=e[l],t}function kt(s){let e,l,t,r,n,f,a,m,d=s[0],i=[];for(let u=0;u<d.length;u+=1)i[u]=wt(bt(s,d,u));return{c(){e=w("div");for(let u=0;u<i.length;u+=1)i[u].c();l=R(),t=w("div"),r=ce("New folder"),this.h()},l(u){e=E(u,"DIV",{id:!0,class:!0});var c=D(e);for(let v=0;v<i.length;v+=1)i[v].l(c);l=U(c),t=E(c,"DIV",{class:!0});var g=D(t);r=fe(g,"New folder"),g.forEach(_),c.forEach(_),this.h()},h(){o(t,"class","folder new-folder svelte-1wez90j"),o(e,"id","panel"),o(e,"class","panel svelte-1wez90j")},m(u,c){$(u,e,c);for(let g=0;g<i.length;g+=1)i[g].m(e,null);h(e,l),h(e,t),h(t,r),s[14](e),f=!0,a||(m=z(t,"click",s[5]),a=!0)},p(u,c){if(c&4053){d=u[0];let g;for(g=0;g<d.length;g+=1){const v=bt(u,d,g);i[g]?i[g].p(v,c):(i[g]=wt(v),i[g].c(),i[g].m(e,l))}for(;g<i.length;g+=1)i[g].d(1);i.length=d.length}},i(u){f||(Ze(()=>{n||(n=we(e,ct,{},!0)),n.run(1)}),f=!0)},o(u){n||(n=we(e,ct,{},!1)),n.run(0),f=!1},d(u){u&&_(e),ze(i,u),s[14](null),u&&n&&n.end(),a=!1,m()}}}function wt(s){let e,l=s[16].title+"",t,r,n,f,a;return{c(){e=w("div"),t=ce(l),this.h()},l(m){e=E(m,"DIV",{"data-id":!0,class:!0});var d=D(e);t=fe(d,l),d.forEach(_),this.h()},h(){o(e,"data-id",r=s[16].docId),o(e,"class",n="folder "+(s[2].docId===s[16].docId?"chosenFolder":"")+" svelte-1wez90j"),Ye(e,"isEditing",s[4]&&s[2].docId===s[16].docId)},m(m,d){$(m,e,d),h(e,t),f||(a=[z(e,"mouseup",s[12]),z(e,"mouseenter",s[13]),z(e,"mouseleave",s[11]),z(e,"dblclick",Fe(at(s[7]))),z(e,"keypress",s[6]),z(e,"click",at(s[8]))],f=!0)},p(m,d){d&1&&l!==(l=m[16].title+"")&&Ae(t,l),d&1&&r!==(r=m[16].docId)&&o(e,"data-id",r),d&5&&n!==(n="folder "+(m[2].docId===m[16].docId?"chosenFolder":"")+" svelte-1wez90j")&&o(e,"class",n),d&21&&Ye(e,"isEditing",m[4]&&m[2].docId===m[16].docId)},d(m){m&&_(e),f=!1,Ke(a)}}}function al(s){let e,l,t=s[1]&&kt(s);return{c(){t&&t.c(),e=ue()},l(r){t&&t.l(r),e=ue()},m(r,n){t&&t.m(r,n),$(r,e,n),l=!0},p(r,[n]){r[1]?t?(t.p(r,n),n&2&&A(t,1)):(t=kt(r),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(ge(),B(t,1,1,()=>{t=null}),_e())},i(r){l||(A(t),l=!0)},o(r){B(t),l=!1},d(r){t&&t.d(r),r&&_(e)}}}function ol(s,e,l){let t;At(s,We,k=>l(15,t=k));let{folders:r=[]}=e,{isVisible:n=!1}=e,{currentFolder:f}=e,a,m=!1;Je(()=>{xe.subscribe(k=>{k==="folder"?l(1,n=!0):(l(1,n=!1),yt().then(p=>{l(0,r=p)}))})});function d(){l(0,r=[...r,{title:""}]),setTimeout(()=>{l(3,a.scrollTop=a.scrollHeight,a),a.children[a.children.length-2].dispatchEvent(new Event("dblclick")),l(4,m=!1)},0)}async function i(k){const p=k.target;if(k.key==="Enter"){if(k.preventDefault(),p.onblur=null,p.contentEditable="false",l(4,m=!1),p.innerText.trim()===""&&p.getAttribute("data-id")){Ot(p.getAttribute("data-id")),p.style.display="none";return}if(p.innerText.trim()===""&&!p.getAttribute("data-id")){p.style.display="none";return}const P=p.style.backgroundColor;if(p.style.backgroundColor="rgb(20 221 65 / 45%)",p.getAttribute("data-id"))ft({docId:p.getAttribute("data-id"),title:p.innerText.trim()});else{const I=p.innerText.trim();ft({title:I}).then(S=>p.setAttribute("data-id",S))}setTimeout(()=>{p.style.backgroundColor=P},1e3)}}function u(k){const p=k.target;if(p.contentEditable==="true")return;p.focus();const P=p.innerText;l(4,m=!0),p.onblur=async()=>{p.contentEditable="false",l(4,m=!1),P?p.innerText=P:p.style.display="none"},p.contentEditable="true",p.focus()}function c(k){const p=k.target;!p.getAttribute("data-id")||(zt(p.getAttribute("data-id")),l(2,f.docId=p.getAttribute("data-id"),f),document.querySelectorAll(".chosenFolder").forEach(P=>P.classList.remove("chosenFolder")),p.classList.add("chosenFolder"))}function g(k){const p=k.target,P=t,I=p.dataset.id;if(I&&P){Xt(P,I);const S=document.querySelector(`[data-id="${t}"]`);S&&(S.style.display="none",He.set(!1))}}function v(){const k=document.querySelector(`[data-id="${t}"]`);k&&(k.style.transform="scale(0.6)",k.style.filter="brightness(0.95)",He.set(!0))}function y(){const k=document.querySelector(`[data-id="${t}"]`);k&&(k.style.transform="scale(1)",k.style.filter="brightness(1)",He.set(!1))}const V=k=>g(k),H=()=>{v()};function M(k){qe[k?"unshift":"push"](()=>{a=k,l(3,a)})}return s.$$set=k=>{"folders"in k&&l(0,r=k.folders),"isVisible"in k&&l(1,n=k.isVisible),"currentFolder"in k&&l(2,f=k.currentFolder)},[r,n,f,a,m,d,i,u,c,g,v,y,V,H,M]}class il extends Ee{constructor(e){super(),Ie(this,e,ol,al,De,{folders:0,isVisible:1,currentFolder:2})}}function Et(s,e,l){const t=s.slice();return t[7]=e[l],t}function cl(s){return{c:W,l:W,m:W,p:W,i:W,o:W,d:W}}function fl(s){let e,l;return e=new il({props:{folders:s[0],currentFolder:{docId:s[10].currentFolder,title:""}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const n={};r&1&&(n.folders=t[0]),e.$set(n)},i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function ul(s){return{c:W,l:W,m:W,p:W,i:W,o:W,d:W}}function dl(s){let e,l;return e=new Jt({}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:W,i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function hl(s){let e,l,t,r,n;t=new nl({}),t.$on("click",s[5]);let f=s[1],a=[];for(let d=0;d<f.length;d+=1)a[d]=It(Et(s,f,d));const m=d=>B(a[d],1,1,()=>{a[d]=null});return{c(){e=w("div"),l=w("div"),te(t.$$.fragment),r=R();for(let d=0;d<a.length;d+=1)a[d].c();this.h()},l(d){e=E(d,"DIV",{class:!0});var i=D(e);l=E(i,"DIV",{class:!0});var u=D(l);le(t.$$.fragment,u),u.forEach(_),r=U(i);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(_),this.h()},h(){o(l,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center"),o(e,"class","flex flex-wrap justify-center lg:p-12 mg:p-6 p-3")},m(d,i){$(d,e,i),h(e,l),re(t,l,null),h(e,r);for(let u=0;u<a.length;u+=1)a[u].m(e,null);n=!0},p(d,i){if(i&2){f=d[1];let u;for(u=0;u<f.length;u+=1){const c=Et(d,f,u);a[u]?(a[u].p(c,i),A(a[u],1)):(a[u]=It(c),a[u].c(),A(a[u],1),a[u].m(e,null))}for(ge(),u=f.length;u<a.length;u+=1)m(u);_e()}},i(d){if(!n){A(t.$$.fragment,d);for(let i=0;i<f.length;i+=1)A(a[i]);n=!0}},o(d){B(t.$$.fragment,d),a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)B(a[i]);n=!1},d(d){d&&_(e),se(t),ze(a,d)}}}function ml(s){let e,l;return e=new Qt({}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:W,i(t){l||(A(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function It(s){let e,l,t,r;return l=new ll({props:{card:s[7]}}),{c(){e=w("div"),te(l.$$.fragment),t=R(),this.h()},l(n){e=E(n,"DIV",{class:!0});var f=D(e);le(l.$$.fragment,f),t=U(f),f.forEach(_),this.h()},h(){o(e,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center")},m(n,f){$(n,e,f),re(l,e,null),h(e,t),r=!0},p(n,f){const a={};f&2&&(a.card=n[7]),l.$set(a)},i(n){r||(A(l.$$.fragment,n),r=!0)},o(n){B(l.$$.fragment,n),r=!1},d(n){n&&_(e),se(l)}}}function gl(s){let e,l,t,r,n,f,a;e=new $t({}),e.$on("filter",s[4]);let m={ctx:s,current:null,token:null,hasCatch:!1,pending:ul,then:fl,catch:cl,value:10,blocks:[,,,]};Ft(Oe(),m);const d=[ml,hl,dl],i=[];function u(c,g){return c[2]?0:c[1]?1:2}return r=u(s),n=i[r]=d[r](s),{c(){te(e.$$.fragment),l=R(),m.block.c(),t=R(),n.c(),f=ue()},l(c){le(e.$$.fragment,c),l=U(c),m.block.l(c),t=U(c),n.l(c),f=ue()},m(c,g){re(e,c,g),$(c,l,g),m.block.m(c,m.anchor=g),m.mount=()=>t.parentNode,m.anchor=t,$(c,t,g),i[r].m(c,g),$(c,f,g),a=!0},p(c,[g]){s=c,Mt(m,s,g);let v=r;r=u(s),r===v?i[r].p(s,g):(ge(),B(i[v],1,1,()=>{i[v]=null}),_e(),n=i[r],n?n.p(s,g):(n=i[r]=d[r](s),n.c()),A(n,1),n.m(f.parentNode,f))},i(c){a||(A(e.$$.fragment,c),A(m.block),A(n),a=!0)},o(c){B(e.$$.fragment,c);for(let g=0;g<3;g+=1){const v=m.blocks[g];B(v)}B(n),a=!1},d(c){se(e,c),c&&_(l),m.block.d(c),m.token=null,m=null,c&&_(t),i[r].d(c),c&&_(f)}}}function _l(s,e,l){let t,r,n=!0,f;function a(i){l(1,r=r==null?void 0:r.filter(u=>(i.completed?u.checked===i.completed:!0)&&(u.date?i.till?u.date<=i.till:!0:!i.till)&&i.tags.every(c=>u.tags.some(g=>g.text===c.text))&&(i.text?u.text.includes(i.text):!0)))}Je(async()=>{if($e())ot(Pt(it(),"users",$e().uid),async()=>{l(2,n=!0),Ue().then(i=>{l(1,r=i),Qe(Ce)&&a(f),l(2,n=!1)}),(await Oe()).currentFolder&&ot(Bt(it(),"users",$e().uid,"folders",(await Oe()).currentFolder,"items"),()=>{l(2,n=!0),Ue().then(i=>{l(1,r=i),Qe(Ce)&&a(f),l(2,n=!1)})})});else{window.location.href="/login";return}l(1,r=await Ue()),l(2,n=!1),yt().then(i=>{l(0,t=i)})}),Ce.subscribe(async i=>{i&&(l(1,r=await Ue()),a(f))});const m=i=>{l(3,f=i.detail),Ce.set(!1),Ce.set(!0)};function d(i){Nt.call(this,s,i)}return[t,r,n,f,m,d]}class El extends Ee{constructor(e){super(),Ie(this,e,_l,gl,De,{})}}export{El as default};
