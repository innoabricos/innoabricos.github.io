import{S as xe,i as ye,s as Ee,e as k,k as B,c as x,a as E,d as p,m as L,M as Ve,b as a,g as O,L as m,E as J,N as Qe,O as ke,l as de,q as z,n as he,o as N,p as pe,v as We,P as Re,w as te,x as re,y as le,B as se,t as ce,h as fe,Q as Se,R as G,T as Ce,j as ze,U as qe,V as Ze,W as Tt,f as ve,X as Ue,Y as Vt,Z as Xe,_ as Pe,$ as Ye,a0 as ot,a1 as zt,F as Ct,G as Ft,a2 as At}from"../chunks/index-0489bdd4.js";import{u as jt,g as Oe,E as at,D as Mt,B as it,V as Nt}from"../chunks/firebase-218fcd9a.js";import{o as Ke,f as $e,M as St,S as Pt,C as Yt,g as He,T as Et,u as Bt,s as Lt,d as Rt,a as Ut,c as $t,b as Je,i as Le,e as It,h as ct,j as Ht,k as ft,l as qt,m as Gt,N as Ot,n as Be,p as Te}from"../chunks/Navbar-8c572b37.js";import{P as Xt}from"../chunks/ProgressIndicator-6ca88bde.js";import"../chunks/index-621d9ca2.js";function dt(s){let e,r,t,l,n,c,o,g,u,i,d,f,h,v,I,D,R;return{c(){e=k("div"),r=k("div"),t=k("div"),l=k("img"),c=B(),o=k("div"),g=k("div"),u=k("img"),d=B(),f=k("div"),h=k("div"),v=k("img"),this.h()},l(F){e=x(F,"DIV",{id:!0,class:!0});var _=E(e);r=x(_,"DIV",{class:!0});var w=E(r);t=x(w,"DIV",{class:!0});var M=E(t);l=x(M,"IMG",{src:!0,alt:!0}),M.forEach(p),w.forEach(p),c=L(_),o=x(_,"DIV",{class:!0});var y=E(o);g=x(y,"DIV",{class:!0});var A=E(g);u=x(A,"IMG",{src:!0,alt:!0}),A.forEach(p),y.forEach(p),d=L(_),f=x(_,"DIV",{class:!0});var C=E(f);h=x(C,"DIV",{class:!0});var P=E(h);v=x(P,"IMG",{src:!0,alt:!0}),P.forEach(p),C.forEach(p),_.forEach(p),this.h()},h(){Ve(l.src,n="/images/arrow.png")||a(l,"src",n),a(l,"alt","arrow"),a(t,"class","arrow svelte-arkf3m"),a(r,"class","arrowSliding svelte-arkf3m"),Ve(u.src,i="/images/arrow.png")||a(u,"src",i),a(u,"alt","arrow"),a(g,"class","arrow svelte-arkf3m"),a(o,"class","arrowSliding delay1 svelte-arkf3m"),Ve(v.src,I="/images/arrow.png")||a(v,"src",I),a(v,"alt","arrow"),a(h,"class","arrow svelte-arkf3m"),a(f,"class","arrowSliding delay2 svelte-arkf3m"),a(e,"id","arrowAnim"),a(e,"class","svelte-arkf3m")},m(F,_){O(F,e,_),m(e,r),m(r,t),m(t,l),m(e,c),m(e,o),m(o,g),m(g,u),m(e,d),m(e,f),m(f,h),m(h,v),s[2](e),R=!0},p:J,i(F){R||(Qe(()=>{D||(D=ke(e,$e,{},!0)),D.run(1)}),R=!0)},o(F){D||(D=ke(e,$e,{},!1)),D.run(0),R=!1},d(F){F&&p(e),s[2](null),F&&D&&D.end()}}}function Jt(s){let e,r,t=s[1]&&dt(s);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,n){t&&t.m(l,n),O(l,e,n),r=!0},p(l,[n]){l[1]?t?(t.p(l,n),n&2&&z(t,1)):(t=dt(l),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(he(),N(t,1,1,()=>{t=null}),pe())},i(l){r||(z(t),r=!0)},o(l){N(t),r=!1},d(l){t&&t.d(l),l&&p(e)}}}function Qt(s,e,r){let t,l=!0;We(()=>{Ke.subscribe(c=>{c==="folder"?r(1,l=!1):setTimeout(()=>{r(1,l=!0)},200)})});function n(c){Re[c?"unshift":"push"](()=>{t=c,r(0,t)})}return[t,l,n]}class Wt extends xe{constructor(e){super(),ye(this,e,Qt,Jt,Ee,{})}}function ut(s,e,r){const t=s.slice();return t[20]=e[r],t}function mt(s){let e,r,t;return r=new Et({props:{tag:s[20]}}),{c(){e=k("div"),te(r.$$.fragment),this.h()},l(l){e=x(l,"DIV",{class:!0});var n=E(e);re(r.$$.fragment,n),n.forEach(p),this.h()},h(){a(e,"class","tag-tag svelte-1fix5m")},m(l,n){O(l,e,n),le(r,e,null),t=!0},p(l,n){const c={};n&8&&(c.tag=l[20]),r.$set(c)},i(l){t||(z(r.$$.fragment,l),t=!0)},o(l){N(r.$$.fragment,l),t=!1},d(l){l&&p(e),se(r)}}}function Zt(s){let e,r,t,l,n,c,o,g,u,i,d,f,h,v,I,D,R,F,_,w,M,y,A,C,P,ee,Q,q,ae,H,oe,be,W,Y,ue,S,b,V,j,Z,me,_e,Ie;q=new St({props:{chosenTags:s[3],tags:s[5],isVisible:s[6]}}),q.$on("handleChosenTag",s[8]);let ne=s[3],U=[];for(let T=0;T<ne.length;T+=1)U[T]=mt(ut(s,ne,T));const Fe=T=>N(U[T],1,1,()=>{U[T]=null});return b=new Pt({}),b.$on("click",s[9]),j=new Yt({}),j.$on("click",s[16]),{c(){e=k("div"),r=k("div"),t=k("header"),l=k("span"),n=ce(s[4]),c=B(),o=k("main"),g=k("label"),u=k("span"),i=ce("Done:"),d=B(),f=k("input"),h=B(),v=k("label"),I=k("span"),D=ce("Notification:"),R=B(),F=k("input"),_=B(),w=k("label"),M=k("span"),y=ce("Tags:"),A=B(),C=k("img"),ee=B(),Q=k("div"),te(q.$$.fragment),ae=B(),H=k("div"),oe=k("div");for(let T=0;T<U.length;T+=1)U[T].c();be=B(),W=k("textarea"),Y=B(),ue=k("footer"),S=k("div"),te(b.$$.fragment),V=B(),te(j.$$.fragment),this.h()},l(T){e=x(T,"DIV",{class:!0});var $=E(e);r=x($,"DIV",{class:!0});var K=E(r);t=x(K,"HEADER",{class:!0});var X=E(t);l=x(X,"SPAN",{});var De=E(l);n=fe(De,s[4]),De.forEach(p),X.forEach(p),c=L(K),o=x(K,"MAIN",{class:!0});var ge=E(o);g=x(ge,"LABEL",{for:!0,class:!0});var Ae=E(g);u=x(Ae,"SPAN",{class:!0});var et=E(u);i=fe(et,"Done:"),et.forEach(p),d=L(Ae),f=x(Ae,"INPUT",{id:!0,type:!0,class:!0}),Ae.forEach(p),h=L(ge),v=x(ge,"LABEL",{for:!0,class:!0});var je=E(v);I=x(je,"SPAN",{class:!0});var tt=E(I);D=fe(tt,"Notification:"),tt.forEach(p),R=L(je),F=x(je,"INPUT",{id:!0,type:!0,class:!0}),je.forEach(p),_=L(ge),w=x(ge,"LABEL",{for:!0,class:!0});var we=E(w);M=x(we,"SPAN",{class:!0});var rt=E(M);y=fe(rt,"Tags:"),rt.forEach(p),A=L(we),C=x(we,"IMG",{alt:!0,src:!0,class:!0}),ee=L(we),Q=x(we,"DIV",{class:!0});var lt=E(Q);re(q.$$.fragment,lt),lt.forEach(p),we.forEach(p),ae=L(ge),H=x(ge,"DIV",{class:!0});var Me=E(H);oe=x(Me,"DIV",{class:!0});var st=E(oe);for(let Ge=0;Ge<U.length;Ge+=1)U[Ge].l(st);st.forEach(p),be=L(Me),W=x(Me,"TEXTAREA",{placeholder:!0,class:!0}),E(W).forEach(p),Me.forEach(p),ge.forEach(p),Y=L(K),ue=x(K,"FOOTER",{class:!0});var nt=E(ue);S=x(nt,"DIV",{class:!0});var Ne=E(S);re(b.$$.fragment,Ne),V=L(Ne),re(j.$$.fragment,Ne),Ne.forEach(p),nt.forEach(p),K.forEach(p),$.forEach(p),this.h()},h(){a(t,"class","svelte-1fix5m"),a(u,"class","svelte-1fix5m"),a(f,"id","done"),a(f,"type","checkbox"),a(f,"class","svelte-1fix5m"),a(g,"for","done"),a(g,"class","svelte-1fix5m"),a(I,"class","svelte-1fix5m"),a(F,"id","notify"),a(F,"type","datetime-local"),a(F,"class","svelte-1fix5m"),a(v,"for","notify"),a(v,"class","svelte-1fix5m"),a(M,"class","svelte-1fix5m"),a(C,"alt","plus"),Ve(C.src,P="images/plus.svg")||a(C,"src",P),a(C,"class","svelte-1fix5m"),a(Q,"class","multiselect svelte-1fix5m"),a(w,"for","tags"),a(w,"class","svelte-1fix5m"),a(oe,"class","tags svelte-1fix5m"),a(W,"placeholder","Enter description"),a(W,"class","svelte-1fix5m"),a(H,"class","changeable svelte-1fix5m"),a(o,"class","svelte-1fix5m"),a(S,"class","buttons svelte-1fix5m"),a(ue,"class","svelte-1fix5m"),a(r,"class","center-block svelte-1fix5m"),a(e,"class","background svelte-1fix5m")},m(T,$){O(T,e,$),m(e,r),m(r,t),m(t,l),m(l,n),m(r,c),m(r,o),m(o,g),m(g,u),m(u,i),m(g,d),m(g,f),f.checked=s[0],m(o,h),m(o,v),m(v,I),m(I,D),m(v,R),m(v,F),Se(F,s[1]),m(o,_),m(o,w),m(w,M),m(M,y),m(w,A),m(w,C),m(w,ee),m(w,Q),le(q,Q,null),m(o,ae),m(o,H),m(H,oe);for(let K=0;K<U.length;K+=1)U[K].m(oe,null);m(H,be),m(H,W),Se(W,s[2]),m(r,Y),m(r,ue),m(ue,S),le(b,S,null),m(S,V),le(j,S,null),me=!0,_e||(Ie=[G(f,"change",s[12]),G(F,"input",s[13]),G(C,"click",Ce(s[14])),G(W,"input",s[15]),G(r,"click",Ce(s[17]))],_e=!0)},p(T,[$]){(!me||$&16)&&ze(n,T[4]),$&1&&(f.checked=T[0]),$&2&&Se(F,T[1]);const K={};if($&8&&(K.chosenTags=T[3]),$&32&&(K.tags=T[5]),$&64&&(K.isVisible=T[6]),q.$set(K),$&8){ne=T[3];let X;for(X=0;X<ne.length;X+=1){const De=ut(T,ne,X);U[X]?(U[X].p(De,$),z(U[X],1)):(U[X]=mt(De),U[X].c(),z(U[X],1),U[X].m(oe,null))}for(he(),X=ne.length;X<U.length;X+=1)Fe(X);pe()}$&4&&Se(W,T[2])},i(T){if(!me){z(q.$$.fragment,T);for(let $=0;$<ne.length;$+=1)z(U[$]);z(b.$$.fragment,T),z(j.$$.fragment,T),Qe(()=>{Z||(Z=ke(r,$e,{},!0)),Z.run(1)}),me=!0}},o(T){N(q.$$.fragment,T),U=U.filter(Boolean);for(let $=0;$<U.length;$+=1)N(U[$]);N(b.$$.fragment,T),N(j.$$.fragment,T),Z||(Z=ke(r,$e,{},!1)),Z.run(0),me=!1},d(T){T&&p(e),se(q),qe(U,T),se(b),se(j),T&&Z&&Z.end(),_e=!1,Ze(Ie)}}}function Kt(s,e,r){const t=Tt();let{done:l=!1}=e,{datetime:n}=e,{ts:c}=e,{description:o}=e,{chosenTags:g=[]}=e,{title:u}=e,{docId:i}=e,d=[];function f(y){const A=new Date(y.seconds*1e3),C=`${A.getFullYear()}`;let P=`${A.getMonth()+1}`;P.length==1&&(P=`0${P}`);let ee=`${A.getDate()}`;ee.length==1&&(ee=`0${ee}`);let Q=`${A.getHours()}`;Q.length==1&&(Q=`0${Q}`);let q=`${A.getMinutes()}`;q.length==1&&(q=`0${q}`),console.log(`${C}-${P}-${ee}T${Q}:${q}`),r(1,n=`${C}-${P}-${ee}T${Q}:${q}`)}c&&f(c),He().then(y=>r(5,d=y.tags));let h=!1;function v(y){y.detail.checked?r(3,g=[...g,y.detail.tag]):r(3,g=g.filter(A=>A.text!=y.detail.tag.text))}async function I(){let y;if(!o)return;const A={checked:l,text:o,tags:g};if(console.log("save",n),n){const P=new Date(n);console.log(`Date: ${P}`),y=jt.fromDate(new Date(P.getFullYear(),P.getMonth(),P.getDate(),P.getHours(),P.getMinutes()))}y&&(A.date=y),i&&(A.docId=i),console.log(JSON.stringify(A));const C=await Bt(A);t("close"),A.docId&&n&&await Lt(n,C,o),t("close")}function D(){l=this.checked,r(0,l)}function R(){n=this.value,r(1,n)}const F=()=>r(6,h=!h);function _(){o=this.value,r(2,o)}const w=()=>t("close"),M=()=>{r(6,h=!1)};return s.$$set=y=>{"done"in y&&r(0,l=y.done),"datetime"in y&&r(1,n=y.datetime),"ts"in y&&r(10,c=y.ts),"description"in y&&r(2,o=y.description),"chosenTags"in y&&r(3,g=y.chosenTags),"title"in y&&r(4,u=y.title),"docId"in y&&r(11,i=y.docId)},[l,n,o,g,u,d,h,t,v,I,c,i,D,R,F,_,w,M]}class Dt extends xe{constructor(e){super(),ye(this,e,Kt,Zt,Ee,{done:0,datetime:1,ts:10,description:2,chosenTags:3,title:4,docId:11})}}const{window:gt}=Vt;function ht(s,e,r){const t=s.slice();return t[20]=e[r],t}function pt(s){let e,r,t,l;return r=new Et({props:{tag:s[20]}}),{c(){e=k("div"),te(r.$$.fragment),t=B(),this.h()},l(n){e=x(n,"DIV",{class:!0});var c=E(e);re(r.$$.fragment,c),t=L(c),c.forEach(p),this.h()},h(){a(e,"class","tag-wrapper svelte-worc30")},m(n,c){O(n,e,c),le(r,e,null),m(e,t),l=!0},p(n,c){const o={};c&1&&(o.tag=n[20]),r.$set(o)},i(n){l||(z(r.$$.fragment,n),l=!0)},o(n){N(r.$$.fragment,n),l=!1},d(n){n&&p(e),se(r)}}}function vt(s){let e,r;return e=new Dt({props:{datetime:void 0,title:"Edit card",chosenTags:s[0].tags,done:s[0].checked,description:s[0].text,ts:s[0].date,docId:s[0].docId}}),e.$on("close",s[19]),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p(t,l){const n={};l&1&&(n.chosenTags=t[0].tags),l&1&&(n.done=t[0].checked),l&1&&(n.description=t[0].text),l&1&&(n.ts=t[0].date),l&1&&(n.docId=t[0].docId),e.$set(n)},i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function er(s){let e,r,t,l,n=s[2]?`${ie(s[2].getDate())}.${ie(s[2].getMonth()+1)}.${ie(s[2].getFullYear())}`:"Date",c,o,g,u=s[2]?`${ie(s[2].getHours())}:${ie(s[2].getMinutes())}`:"Time",i,d,f,h,v,I,D,R,F=s[0].text+"",_,w,M,y,A,C,P,ee,Q,q,ae,H,oe,be,W=s[0].tags,Y=[];for(let b=0;b<W.length;b+=1)Y[b]=pt(ht(s,W,b));const ue=b=>N(Y[b],1,1,()=>{Y[b]=null});let S=s[3]&&vt(s);return{c(){e=k("div"),r=k("header"),t=k("div"),l=k("div"),c=ce(n),o=B(),g=k("div"),i=ce(u),d=B(),f=k("div"),h=k("img"),I=B(),D=k("main"),R=k("p"),_=ce(F),w=B(),M=k("span"),y=k("input"),C=B(),P=k("footer");for(let b=0;b<Y.length;b+=1)Y[b].c();q=B(),S&&S.c(),ae=de(),this.h()},l(b){e=x(b,"DIV",{style:!0,class:!0,"data-id":!0});var V=E(e);r=x(V,"HEADER",{class:!0});var j=E(r);t=x(j,"DIV",{class:!0,style:!0});var Z=E(t);l=x(Z,"DIV",{class:!0});var me=E(l);c=fe(me,n),me.forEach(p),o=L(Z),g=x(Z,"DIV",{class:!0});var _e=E(g);i=fe(_e,u),_e.forEach(p),Z.forEach(p),d=L(j),f=x(j,"DIV",{class:!0});var Ie=E(f);h=x(Ie,"IMG",{class:!0,alt:!0,src:!0}),Ie.forEach(p),j.forEach(p),I=L(V),D=x(V,"MAIN",{class:!0});var ne=E(D);R=x(ne,"P",{class:!0});var U=E(R);_=fe(U,F),U.forEach(p),w=L(ne),M=x(ne,"SPAN",{class:!0,for:!0});var Fe=E(M);y=x(Fe,"INPUT",{type:!0,name:!0,class:!0}),Fe.forEach(p),ne.forEach(p),C=L(V),P=x(V,"FOOTER",{class:!0});var T=E(P);for(let $=0;$<Y.length;$+=1)Y[$].l(T);T.forEach(p),V.forEach(p),q=L(b),S&&S.l(b),ae=de(),this.h()},h(){a(l,"class","date"),a(g,"class","time"),a(t,"class","date-div svelte-worc30"),ve(t,"color",s[1]),a(h,"class","w-4 svelte-worc30"),a(h,"alt","delete"),Ve(h.src,v="images/x.svg")||a(h,"src",v),a(f,"class","image svelte-worc30"),a(r,"class","svelte-worc30"),a(R,"class","svelte-worc30"),a(y,"type","checkbox"),a(y,"name","checked"),y.checked=A=s[0].checked,a(y,"class","svelte-worc30"),a(M,"class","w-5 svelte-worc30"),a(M,"for",""),a(D,"class","py-1 svelte-worc30"),a(P,"class","svelte-worc30"),ve(e,"left",s[6]+"px"),ve(e,"top",s[7]+"px"),a(e,"class",ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(s[0].checked?"checked":"")+" svelte-worc30"),a(e,"data-id",Q=s[0].docId),Ue(e,"draggable",s[8]===!0)},m(b,V){O(b,e,V),m(e,r),m(r,t),m(t,l),m(l,c),m(t,o),m(t,g),m(g,i),m(r,d),m(r,f),m(f,h),s[17](r),m(e,I),m(e,D),m(D,R),m(R,_),m(D,w),m(D,M),m(M,y),m(e,C),m(e,P);for(let j=0;j<Y.length;j+=1)Y[j].m(P,null);s[18](e),O(b,q,V),S&&S.m(b,V),O(b,ae,V),H=!0,oe||(be=[G(gt,"mouseup",s[14]),G(gt,"mousemove",s[13]),G(h,"click",Ce(s[9])),G(r,"mousedown",s[16]),G(y,"click",Ce(s[10])),G(D,"click",s[11]),G(P,"click",s[11])],oe=!0)},p(b,[V]){if((!H||V&4)&&n!==(n=b[2]?`${ie(b[2].getDate())}.${ie(b[2].getMonth()+1)}.${ie(b[2].getFullYear())}`:"Date")&&ze(c,n),(!H||V&4)&&u!==(u=b[2]?`${ie(b[2].getHours())}:${ie(b[2].getMinutes())}`:"Time")&&ze(i,u),(!H||V&2)&&ve(t,"color",b[1]),(!H||V&1)&&F!==(F=b[0].text+"")&&ze(_,F),(!H||V&1&&A!==(A=b[0].checked))&&(y.checked=A),V&1){W=b[0].tags;let j;for(j=0;j<W.length;j+=1){const Z=ht(b,W,j);Y[j]?(Y[j].p(Z,V),z(Y[j],1)):(Y[j]=pt(Z),Y[j].c(),z(Y[j],1),Y[j].m(P,null))}for(he(),j=W.length;j<Y.length;j+=1)ue(j);pe()}(!H||V&64)&&ve(e,"left",b[6]+"px"),(!H||V&128)&&ve(e,"top",b[7]+"px"),(!H||V&1&&ee!==(ee="card text-sm font-medium text-gray-600 cursor-pointer hover:text-gray-900 hover:ring-2 hover:ring-gray-300 "+(b[0].checked?"checked":"")+" svelte-worc30"))&&a(e,"class",ee),(!H||V&1&&Q!==(Q=b[0].docId))&&a(e,"data-id",Q),V&257&&Ue(e,"draggable",b[8]===!0),b[3]?S?(S.p(b,V),V&8&&z(S,1)):(S=vt(b),S.c(),z(S,1),S.m(ae.parentNode,ae)):S&&(he(),N(S,1,1,()=>{S=null}),pe())},i(b){if(!H){for(let V=0;V<W.length;V+=1)z(Y[V]);z(S),H=!0}},o(b){Y=Y.filter(Boolean);for(let V=0;V<Y.length;V+=1)N(Y[V]);N(S),H=!1},d(b){b&&p(e),s[17](null),qe(Y,b),s[18](null),b&&p(q),S&&S.d(b),b&&p(ae),oe=!1,Ze(be)}}}function ie(s){return s>9?s.toString():`0${s.toString()}`}function tr(s,e,r){var A;let t,{card:l}=e,n=null,c=!1;l.date&&(n=new Date(((A=l.date)==null?void 0:A.seconds)*1e3));let o=Date.now();setInterval(()=>{r(15,o=Date.now())},1e4);function g(){!l.docId||(Rt(l.docId),l.date&&Ut(l.docId))}function u(){r(0,l.checked=!l.checked,l),l.docId&&$t(l.docId,l.checked)}function i(){r(3,c=!0)}let d,f,h,v,I=!1;function D(C){setTimeout(()=>{f&&window.getComputedStyle(f).cursor==="move"&&Ke.set("folder")},500),r(8,I=!0),r(6,h=d.getBoundingClientRect().left),r(7,v=d.getBoundingClientRect().top),l.docId&&Je.set(l.docId)}function R(C){I&&(Xe(Le)?(r(6,h=C.clientX-40),r(7,v=C.clientY-30)):(r(6,h=C.clientX+5),r(7,v=C.clientY+5)))}function F(){r(8,I=!1),Je.set("")}const _=C=>D();function w(C){Re[C?"unshift":"push"](()=>{f=C,r(5,f)})}function M(C){Re[C?"unshift":"push"](()=>{d=C,r(4,d)})}const y=()=>{r(3,c=!1)};return s.$$set=C=>{"card"in C&&r(0,l=C.card)},s.$$.update=()=>{s.$$.dirty&32769&&r(1,t=l.date?l.date.seconds*1e3-o>0?"black":"red":"black")},[l,t,n,c,d,f,h,v,I,g,u,i,D,R,F,o,_,w,M,y]}class rr extends xe{constructor(e){super(),ye(this,e,tr,er,Ee,{card:0})}}function bt(s){let e,r;return e=new Dt({props:{title:"New card"}}),e.$on("close",s[2]),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:J,i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function lr(s){let e,r,t,l,n,c,o,g,u,i,d,f,h,v=s[0]&&bt(s);return{c(){e=k("div"),r=Pe("svg"),t=Pe("circle"),l=Pe("line"),n=Pe("line"),c=B(),o=k("p"),g=ce("Add card"),u=B(),v&&v.c(),i=de(),this.h()},l(I){e=x(I,"DIV",{class:!0});var D=E(e);r=Ye(D,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var R=E(r);t=Ye(R,"circle",{style:!0,cx:!0,cy:!0,r:!0}),E(t).forEach(p),l=Ye(R,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(l).forEach(p),n=Ye(R,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(n).forEach(p),R.forEach(p),c=L(D),o=x(D,"P",{class:!0});var F=E(o);g=fe(F,"Add card"),F.forEach(p),D.forEach(p),u=L(I),v&&v.l(I),i=de(),this.h()},h(){ve(t,"stroke-dasharray","3"),a(t,"cx","12"),a(t,"cy","12"),a(t,"r","10"),a(l,"x1","12"),a(l,"y1","9.5"),a(l,"x2","12"),a(l,"y2","14.5"),a(n,"x1","9.5"),a(n,"y1","12"),a(n,"x2","14.5"),a(n,"y2","12"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"class","w-full spinner-hover svelte-1h0plr5"),a(r,"viewBox","0 0 24 24"),a(r,"fill","none"),a(r,"stroke","#000000"),a(r,"stroke-width","0.2"),a(r,"stroke-linecap","round"),a(r,"stroke-linejoin","round"),a(o,"class","w-full text-center mt-3 text-sm font-light"),a(e,"class","w-32 opacity-60 cursor-pointer")},m(I,D){O(I,e,D),m(e,r),m(r,t),m(r,l),m(r,n),m(e,c),m(e,o),m(o,g),O(I,u,D),v&&v.m(I,D),O(I,i,D),d=!0,f||(h=G(e,"click",s[1]),f=!0)},p(I,[D]){I[0]?v?(v.p(I,D),D&1&&z(v,1)):(v=bt(I),v.c(),z(v,1),v.m(i.parentNode,i)):v&&(he(),N(v,1,1,()=>{v=null}),pe())},i(I){d||(z(v),d=!0)},o(I){N(v),d=!1},d(I){I&&p(e),I&&p(u),v&&v.d(I),I&&p(i),f=!1,h()}}}function sr(s,e,r){let t=!1;function l(){r(0,t=!t)}return[t,l,()=>{r(0,t=!1)}]}class nr extends xe{constructor(e){super(),ye(this,e,sr,lr,Ee,{})}}function _t(s,e,r){const t=s.slice();return t[16]=e[r],t}function wt(s){let e,r,t,l,n,c,o,g,u=s[0],i=[];for(let d=0;d<u.length;d+=1)i[d]=kt(_t(s,u,d));return{c(){e=k("div");for(let d=0;d<i.length;d+=1)i[d].c();r=B(),t=k("div"),l=ce("New folder"),this.h()},l(d){e=x(d,"DIV",{id:!0,class:!0});var f=E(e);for(let v=0;v<i.length;v+=1)i[v].l(f);r=L(f),t=x(f,"DIV",{class:!0});var h=E(t);l=fe(h,"New folder"),h.forEach(p),f.forEach(p),this.h()},h(){a(t,"class","folder new-folder svelte-1wez90j"),a(e,"id","panel"),a(e,"class","panel svelte-1wez90j")},m(d,f){O(d,e,f);for(let h=0;h<i.length;h+=1)i[h].m(e,null);m(e,r),m(e,t),m(t,l),s[14](e),c=!0,o||(g=G(t,"click",s[5]),o=!0)},p(d,f){if(f&4053){u=d[0];let h;for(h=0;h<u.length;h+=1){const v=_t(d,u,h);i[h]?i[h].p(v,f):(i[h]=kt(v),i[h].c(),i[h].m(e,r))}for(;h<i.length;h+=1)i[h].d(1);i.length=u.length}},i(d){c||(Qe(()=>{n||(n=ke(e,ct,{},!0)),n.run(1)}),c=!0)},o(d){n||(n=ke(e,ct,{},!1)),n.run(0),c=!1},d(d){d&&p(e),qe(i,d),s[14](null),d&&n&&n.end(),o=!1,g()}}}function kt(s){let e,r=s[16].title+"",t,l,n,c,o;return{c(){e=k("div"),t=ce(r),this.h()},l(g){e=x(g,"DIV",{"data-id":!0,class:!0});var u=E(e);t=fe(u,r),u.forEach(p),this.h()},h(){a(e,"data-id",l=s[16].docId),a(e,"class",n="folder "+(s[2].docId===s[16].docId?"chosenFolder":"")+" svelte-1wez90j"),Ue(e,"isEditing",s[4]&&s[2].docId===s[16].docId)},m(g,u){O(g,e,u),m(e,t),c||(o=[G(e,"mouseup",s[12]),G(e,"mouseenter",s[13]),G(e,"mouseleave",s[11]),G(e,"dblclick",Ce(ot(s[7]))),G(e,"keypress",s[6]),G(e,"click",ot(s[8]))],c=!0)},p(g,u){u&1&&r!==(r=g[16].title+"")&&ze(t,r),u&1&&l!==(l=g[16].docId)&&a(e,"data-id",l),u&5&&n!==(n="folder "+(g[2].docId===g[16].docId?"chosenFolder":"")+" svelte-1wez90j")&&a(e,"class",n),u&21&&Ue(e,"isEditing",g[4]&&g[2].docId===g[16].docId)},d(g){g&&p(e),c=!1,Ze(o)}}}function or(s){let e,r,t=s[1]&&wt(s);return{c(){t&&t.c(),e=de()},l(l){t&&t.l(l),e=de()},m(l,n){t&&t.m(l,n),O(l,e,n),r=!0},p(l,[n]){l[1]?t?(t.p(l,n),n&2&&z(t,1)):(t=wt(l),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(he(),N(t,1,1,()=>{t=null}),pe())},i(l){r||(z(t),r=!0)},o(l){N(t),r=!1},d(l){t&&t.d(l),l&&p(e)}}}function ar(s,e,r){let t;zt(s,Je,_=>r(15,t=_));let{folders:l=[]}=e,{isVisible:n=!1}=e,{currentFolder:c}=e,o,g=!1;We(()=>{Ke.subscribe(_=>{_==="folder"?r(1,n=!0):(r(1,n=!1),It().then(w=>{console.log(l),r(0,l=w)}))})});function u(){r(0,l=[...l,{title:""}]),setTimeout(()=>{r(3,o.scrollTop=o.scrollHeight,o),o.children[o.children.length-2].dispatchEvent(new Event("dblclick")),r(4,g=!1)},0)}async function i(_){const w=_.target;if(_.key==="Enter"){if(_.preventDefault(),w.onblur=null,w.contentEditable="false",r(4,g=!1),w.innerText.trim()===""){Ht(w.getAttribute("data-id")),w.style.display="none",console.log("Enter with empty",w);return}const M=w.style.backgroundColor;if(w.style.backgroundColor="rgb(20 221 65 / 45%)",w.getAttribute("data-id"))ft({docId:w.getAttribute("data-id"),title:w.innerText.trim()});else{const y=w.innerText.trim();ft({title:y}).then(A=>w.setAttribute("data-id",A))}setTimeout(()=>{w.style.backgroundColor=M},1e3)}}function d(_){const w=_.target;w.focus();const M=w.innerText;r(4,g=!0),w.onblur=async()=>{w.contentEditable="false",r(4,g=!1),M?w.innerText=M:(console.log(M),w.style.display="none")},w.contentEditable="true",w.focus()}function f(_){const w=_.target;!w.getAttribute("data-id")||(qt(w.getAttribute("data-id")),r(2,c.docId=w.getAttribute("data-id"),c),document.querySelectorAll(".chosenFolder").forEach(M=>M.classList.remove("chosenFolder")),w.classList.add("chosenFolder"),console.log("Switched to",w.innerText,c))}function h(_){const w=_.target,M=t,y=w.dataset.id;if(y&&M){Gt(M,y);const A=document.querySelector(`[data-id="${t}"]`);A&&(A.style.display="none",Le.set(!1))}}function v(){const _=document.querySelector(`[data-id="${t}"]`);_&&(_.style.transform="scale(0.6)",_.style.filter="brightness(0.95)",Le.set(!0))}function I(){const _=document.querySelector(`[data-id="${t}"]`);_&&(_.style.transform="scale(1)",_.style.filter="brightness(1)",Le.set(!1))}const D=_=>h(_),R=()=>{v()};function F(_){Re[_?"unshift":"push"](()=>{o=_,r(3,o)})}return s.$$set=_=>{"folders"in _&&r(0,l=_.folders),"isVisible"in _&&r(1,n=_.isVisible),"currentFolder"in _&&r(2,c=_.currentFolder)},[l,n,c,o,g,u,i,d,f,h,v,I,D,R,F]}class ir extends xe{constructor(e){super(),ye(this,e,ar,or,Ee,{folders:0,isVisible:1,currentFolder:2})}}function xt(s,e,r){const t=s.slice();return t[7]=e[r],t}function cr(s){return{c:J,l:J,m:J,p:J,i:J,o:J,d:J}}function fr(s){let e,r;return e=new ir({props:{folders:s[0],currentFolder:{docId:s[10].currentFolder,title:""}}}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p(t,l){const n={};l&1&&(n.folders=t[0]),e.$set(n)},i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function dr(s){return{c:J,l:J,m:J,p:J,i:J,o:J,d:J}}function ur(s){let e,r;return e=new Wt({}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:J,i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function mr(s){let e,r,t,l,n;t=new nr({}),t.$on("click",s[5]);let c=s[1],o=[];for(let u=0;u<c.length;u+=1)o[u]=yt(xt(s,c,u));const g=u=>N(o[u],1,1,()=>{o[u]=null});return{c(){e=k("div"),r=k("div"),te(t.$$.fragment),l=B();for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=x(u,"DIV",{class:!0});var i=E(e);r=x(i,"DIV",{class:!0});var d=E(r);re(t.$$.fragment,d),d.forEach(p),l=L(i);for(let f=0;f<o.length;f+=1)o[f].l(i);i.forEach(p),this.h()},h(){a(r,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center"),a(e,"class","flex flex-wrap justify-center lg:p-12 mg:p-6 p-3")},m(u,i){O(u,e,i),m(e,r),le(t,r,null),m(e,l);for(let d=0;d<o.length;d+=1)o[d].m(e,null);n=!0},p(u,i){if(i&2){c=u[1];let d;for(d=0;d<c.length;d+=1){const f=xt(u,c,d);o[d]?(o[d].p(f,i),z(o[d],1)):(o[d]=yt(f),o[d].c(),z(o[d],1),o[d].m(e,null))}for(he(),d=c.length;d<o.length;d+=1)g(d);pe()}},i(u){if(!n){z(t.$$.fragment,u);for(let i=0;i<c.length;i+=1)z(o[i]);n=!0}},o(u){N(t.$$.fragment,u),o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)N(o[i]);n=!1},d(u){u&&p(e),se(t),qe(o,u)}}}function gr(s){let e,r;return e=new Xt({}),{c(){te(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){le(e,t,l),r=!0},p:J,i(t){r||(z(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){se(e,t)}}}function yt(s){let e,r,t,l;return r=new rr({props:{card:s[7]}}),{c(){e=k("div"),te(r.$$.fragment),t=B(),this.h()},l(n){e=x(n,"DIV",{class:!0});var c=E(e);re(r.$$.fragment,c),t=L(c),c.forEach(p),this.h()},h(){a(e,"class","lg:p-7 md:p-5 p-2 w-72 flex justify-center")},m(n,c){O(n,e,c),le(r,e,null),m(e,t),l=!0},p(n,c){const o={};c&2&&(o.card=n[7]),r.$set(o)},i(n){l||(z(r.$$.fragment,n),l=!0)},o(n){N(r.$$.fragment,n),l=!1},d(n){n&&p(e),se(r)}}}function hr(s){let e,r,t,l,n,c,o;e=new Ot({}),e.$on("filter",s[4]);let g={ctx:s,current:null,token:null,hasCatch:!1,pending:dr,then:fr,catch:cr,value:10,blocks:[,,,]};Ct(He(),g);const u=[gr,mr,ur],i=[];function d(f,h){return f[2]?0:f[1]?1:2}return l=d(s),n=i[l]=u[l](s),{c(){te(e.$$.fragment),r=B(),g.block.c(),t=B(),n.c(),c=de()},l(f){re(e.$$.fragment,f),r=L(f),g.block.l(f),t=L(f),n.l(f),c=de()},m(f,h){le(e,f,h),O(f,r,h),g.block.m(f,g.anchor=h),g.mount=()=>t.parentNode,g.anchor=t,O(f,t,h),i[l].m(f,h),O(f,c,h),o=!0},p(f,[h]){s=f,Ft(g,s,h);let v=l;l=d(s),l===v?i[l].p(s,h):(he(),N(i[v],1,1,()=>{i[v]=null}),pe(),n=i[l],n?n.p(s,h):(n=i[l]=u[l](s),n.c()),z(n,1),n.m(c.parentNode,c))},i(f){o||(z(e.$$.fragment,f),z(g.block),z(n),o=!0)},o(f){N(e.$$.fragment,f);for(let h=0;h<3;h+=1){const v=g.blocks[h];N(v)}N(n),o=!1},d(f){se(e,f),f&&p(r),g.block.d(f),g.token=null,g=null,f&&p(t),i[l].d(f),f&&p(c)}}}function pr(s,e,r){let t,l,n=!0,c;function o(i){r(1,l=l==null?void 0:l.filter(d=>(i.completed?d.checked===i.completed:!0)&&(d.date?i.till?d.date<=i.till:!0:!i.till)&&i.tags.every(f=>d.tags.some(h=>h.text===f.text))&&(i.text?d.text.includes(i.text):!0)))}We(async()=>{if(Oe())at(Mt(it(),"users",Oe().uid),async()=>{r(2,n=!0),Be().then(i=>{r(1,l=i),Xe(Te)&&o(c),r(2,n=!1)}),(await He()).currentFolder&&at(Nt(it(),"users",Oe().uid,"folders",(await He()).currentFolder,"items"),()=>{r(2,n=!0),Be().then(i=>{r(1,l=i),Xe(Te)&&o(c),r(2,n=!1)})})});else{window.location.href="/login";return}r(1,l=await Be()),r(2,n=!1),It().then(i=>{r(0,t=i)})}),Te.subscribe(async i=>{i?(r(1,l=await Be()),console.log("Turn on filter"),o(c)):console.log("Turn off filter")});const g=i=>{r(3,c=i.detail),Te.set(!1),Te.set(!0)};function u(i){At.call(this,s,i)}return[t,l,n,c,g,u]}class xr extends xe{constructor(e){super(),ye(this,e,pr,hr,Ee,{})}}export{xr as default};
